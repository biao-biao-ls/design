# ğŸ® KNZN å…³å¡åœºæ™¯é¡µé¢ (Lesson Scene) å®Œæ•´è®¾è®¡æ–‡æ¡£ v1.1

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

**é¡¹ç›®åç§°**: KNZN ç¡¬ä»¶å­¦ä¹ ç½‘ç«™ - èµ›åšæœ‹å…‹é£æ ¼æ¸¸æˆåŒ–å¹³å°  
**é¡µé¢åç§°**: å…³å¡åœºæ™¯ (Lesson Scene / Challenge Arena)  
**è·¯ç”±**: `/lesson/:lessonId` æˆ– `/challenge/:challengeId`  
**ç”¨æˆ·çŠ¶æ€**: å·²ç™»å½•ç”¨æˆ·ï¼ˆä»æŠ€èƒ½åœ°å›¾ `/map` è¿›å…¥ï¼‰  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.1ï¼ˆå¢å¼ºç‰ˆ - åŒ…å«å…³é”®é—æ¼ä¿®å¤ï¼‰  
**æœ€åæ›´æ–°**: 2024-12-20  
**å®¡æ ¸çŠ¶æ€**: âœ… å¯äº¤ä»˜é«˜çº§å·¥ç¨‹å¸ˆè¿›è¡Œå¼€å‘  
**æ–‡æ¡£ç±»å‹**: ç”Ÿäº§çº§è®¾è®¡è§„èŒƒï¼ˆé›¶æ­§ä¹‰ï¼‰

## âš ï¸ v1.1 æ–°å¢å†…å®¹

æœ¬ç‰ˆæœ¬ä¿®å¤äº† v1.0 ä¸­çš„ 5 ä¸ªå…³é”®é—æ¼ï¼š
1. **ç§»åŠ¨ç«¯é€‚é…** - æ¸è¿›å¼é™çº§ä¸ä¼´ä¾£æ¨¡å¼
2. **çŠ¶æ€æŒä¹…åŒ–** - è‡ªåŠ¨å¿«ç…§ä¸é˜²æŒ«è´¥æœºåˆ¶  
3. **å¸ƒå±€ç®¡ç†** - æ™ºèƒ½åˆ†å±ä¸ Zen Mode
4. **Loot ç³»ç»Ÿ** - ä¸ Sector 04 çš„è¿æ¥
5. **é”™è¯¯äººæ€§åŒ–** - æ™ºèƒ½è°ƒè¯•ä¸æ­¥è¿›æ‰§è¡Œ

---

## ğŸ¯ ç¬¬ä¸€éƒ¨åˆ†ï¼šäº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

### 1.1 é¡µé¢å®šä½ä¸ä»·å€¼ä¸»å¼ 

#### æ ¸å¿ƒå®šä½

å…³å¡åœºæ™¯é¡µæ˜¯ç”¨æˆ·ä»**è¢«åŠ¨æµè§ˆ**è½¬å˜ä¸º**ä¸»åŠ¨æŒ‘æˆ˜**çš„èˆå°ã€‚ç”¨æˆ·åœ¨æŠ€èƒ½åœ°å›¾ä¸Šç‚¹å‡»æŸä¸ªèŠ‚ç‚¹åï¼Œè¿›å…¥è¿™ä¸ªæ²‰æµ¸å¼çš„å­¦ä¹ -æŒ‘æˆ˜ç©ºé—´ï¼Œå®Œæˆä¸€ç³»åˆ—ä»»åŠ¡ï¼ˆè§†é¢‘ã€å®éªŒã€ä»£ç æŒ‘æˆ˜ã€é—®å·ï¼‰æ¥æŒæ¡è¯¥æŠ€èƒ½ã€‚

#### è®¾è®¡å“²å­¦

- **æ¨¡å—åŒ–å­¦ä¹ è·¯å¾„**: æ¯ä¸ªå…³å¡åˆ†ä¸º 3-4 ä¸ªå°ç¯èŠ‚ï¼Œé¿å…ä¸€æ¬¡æ€§ä¿¡æ¯è¿‡è½½
- **å³æ—¶åé¦ˆæœºåˆ¶**: æ¯ä¸ªæ“ä½œéƒ½æœ‰ç«‹å³çš„æˆåŠŸ/å¤±è´¥åé¦ˆï¼Œæ¿€åŠ±æŒç»­å°è¯•
- **å¤šç»´åº¦è¯„ä¼°**: ä¸ä»…è€ƒæ ¸çŸ¥è¯†æŒæ¡ï¼Œè¿˜è¯„ä¼°å­¦ä¹ é€Ÿåº¦ã€å°è¯•æ¬¡æ•°ã€åˆ›æ–°åº¦
- **æ²‰æµ¸å¼ç¯å¢ƒ**: èµ›åšæœ‹å…‹ UI + åŠ¨æ€éŸ³æ•ˆï¼Œå¼ºåŒ–"åœ¨è¿›è¡Œä¸€åœºçœŸå®çš„æŠ€æœ¯æŒ‘æˆ˜"çš„æ„Ÿå—

---

### 1.2 æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚ (Functional Requirements)

#### FR-001: å…³å¡å†…å®¹ç»“æ„ âœ… æ¨¡å—åŒ–ç‰ˆ

**æè¿°**: å®šä¹‰å…³å¡çš„å†…å®¹ç»„ç»‡æ–¹å¼ï¼Œç¡®ä¿æ¯ä¸ªå…³å¡æ—¢æœ‰å­¦ä¹ æ·±åº¦åˆä¸è¿‡åº¦å¤æ‚

**å…³å¡ç»“æ„**:
```javascript
const LESSON_STRUCTURE = {
  // å…³å¡å…ƒæ•°æ®
  metadata: {
    id: 'lesson_001',
    title: 'GPIO åŸºç¡€å…¥é—¨',
    description: 'å­¦ä¹ å¦‚ä½•ä½¿ç”¨æ ‘è“æ´¾æ§åˆ¶ LED ç¯äº®ç­',
    sector: 'hardware',
    difficulty: 'BEGINNER',     // BEGINNER | INTERMEDIATE | ADVANCED | MASTER
    estimatedDuration: 45,        // åˆ†é’Ÿ
    prerequisiteSkills: ['ç”µè·¯åŸºç¡€', 'é¢åŒ…æ¿ä½¿ç”¨'],
    learningObjectives: [         // å­¦ä¹ ç›®æ ‡ï¼ˆç”¨æˆ·åº”è¯¥å­¦ä¼šä»€ä¹ˆï¼‰
      'ç†è§£ GPIO ç«¯å£çš„ä½œç”¨',
      'æŒæ¡å¦‚ä½•é…ç½® GPIO ä¸ºè¾“å…¥æˆ–è¾“å‡º',
      'èƒ½ç‹¬ç«‹ç‚¹äº®å’Œç†„ç­ä¸€ä¸ª LED'
    ],
    rewards: {
      xp: 500,
      badge: 'gpio-master',
      unlocksNextSkills: ['PWMæ§åˆ¶LEDäº®åº¦']
    }
  },

  // å…³å¡åŒ…å«çš„ 4 ä¸ªå­¦ä¹ ç¯èŠ‚
  phases: [
    {
      id: 'phase_1',
      type: 'THEORY',              // THEORY | PRACTICAL | CHALLENGE | QUIZ
      title: 'ç¬¬ä¸€é˜¶æ®µ: ç†è®ºåŸºç¡€ (10 min)',
      description: 'äº†è§£ GPIO çš„åŸºæœ¬æ¦‚å¿µ',
      
      content: {
        format: 'video',            // video | interactive-slides | article | code-viewer
        sourceUrl: '/videos/gpio-basics.mp4',
        duration: 600,              // ç§’
        
        // è§†é¢‘çš„å…³é”®æ—¶é—´ç‚¹æ ‡è®°
        keyMoments: [
          {
            time: 0,
            title: 'ä»€ä¹ˆæ˜¯ GPIO?',
            note: 'ç”µæ°”é€šç”¨è¾“å…¥è¾“å‡ºæ¥å£ï¼Œæ ‘è“æ´¾çš„"æ‰‹è‡‚"'
          },
          {
            time: 120,
            title: 'GPIO é’ˆè„šå¸ƒå±€',
            note: 'æ ‘è“æ´¾æœ‰ 40 ä¸ª GPIO é’ˆè„š'
          },
          {
            time: 300,
            title: 'BCM vs Board ç¼–å·',
            note: 'ä¸¤ç§ç¼–å·æ–¹å¼çš„åŒºåˆ«'
          }
        ],
        
        // å†…åµŒçš„äº¤äº’å¼å…ƒç´ 
        interactiveElements: [
          {
            type: 'quiz',
            time: 400,
            question: 'GPIO ä¸­çš„"O"ä»£è¡¨ä»€ä¹ˆ?',
            options: ['Output (è¾“å‡º)', 'Operation (æ“ä½œ)', 'Operator (æ“ä½œç¬¦)'],
            correctAnswer: 0,
            explanation: 'GPIO å®Œæ•´åç§°æ˜¯ General Purpose Input/Output',
            onCorrect: { xp: 50, emoji: 'âœ¨' },
            onIncorrect: { hint: 'æç¤º: æ˜¯ä¸€ä¸ªå•è¯ï¼Œä»¥ O å¼€å¤´' }
          }
        ],
        
        transcript: '/transcripts/gpio-basics-zh.srt'  // å­—å¹•æ–‡ä»¶
      },
      
      completionCriteria: {
        watchPercentage: 80,        // éœ€è¦è§‚çœ‹ 80% çš„è§†é¢‘
        passQuizzes: true            // æ‰€æœ‰å†…åµŒå°æµ‹éƒ½è¦é€šè¿‡
      }
    },

    {
      id: 'phase_2',
      type: 'PRACTICAL',
      title: 'ç¬¬äºŒé˜¶æ®µ: å®è·µç¯èŠ‚ (15 min)',
      description: 'åœ¨è™šæ‹Ÿç¯å¢ƒä¸­çœŸå®æ“ä½œæ ‘è“æ´¾',
      
      content: {
        format: 'virtual-hardware-simulator',
        
        // è™šæ‹Ÿç¡¬ä»¶æ¨¡æ‹Ÿå™¨é…ç½®
        simulator: {
          platform: 'TinkerCAD / Wokwi',          // è™šæ‹Ÿç¡¬ä»¶å¹³å°
          boardType: 'Raspberry Pi 4',
          components: [
            {
              id: 'led_1',
              type: 'LED',
              color: 'red',
              GPIO_pin: 17,                       // GPIO 17
              initialState: 'off'
            },
            {
              id: 'resistor_1',
              type: 'Resistor',
              resistance: 220,
              unit: 'Î©'
            },
            {
              id: 'ground_rail',
              type: 'GroundRail'
            }
          ],
          
          // è™šæ‹Ÿé¢åŒ…æ¿çš„åˆå§‹å¸ƒå±€
          breadboardLayout: {
            description: 'å°† LED çš„æ­£ææ¥åˆ° GPIO 17ï¼Œé€šè¿‡ 220Î© ç”µé˜»æ¥åœ°',
            hint: 'æŒ‰ç…§ç”µè·¯åŸç†å›¾è¿æ¥'
          }
        },
        
        // ç”¨æˆ·éœ€è¦å®Œæˆçš„ä»»åŠ¡æ­¥éª¤
        tasks: [
          {
            step: 1,
            title: 'è¿æ¥ç”µè·¯',
            description: 'æ ¹æ®åŸç†å›¾ï¼Œç”¨è™šæ‹Ÿçº¿è·¯åœ¨é¢åŒ…æ¿ä¸Šè¿æ¥ LED å’Œç”µé˜»',
            validation: {
              type: 'circuit-check',
              rules: [
                { rule: 'LED_positive_connected_to_GPIO17', consequence: 'pass' },
                { rule: 'Resistor_in_series', consequence: 'pass' },
                { rule: 'Complete_circuit_path', consequence: 'pass' }
              ]
            },
            help: {
              hint: 'â­ ä» LED çš„é•¿å¼•è„šå¼€å§‹',
              solution: '/solutions/gpio-circuit-step1.png'
            }
          },
          
          {
            step: 2,
            title: 'ç¼–å†™ä»£ç æ§åˆ¶ LED',
            description: 'å†™ä¸€æ®µ Python ä»£ç ç‚¹äº®å’Œç†„ç­ LED',
            
            environment: {
              type: 'web-ide',
              language: 'python',
              template: `
import RPi.GPIO as GPIO
import time

# è®¾ç½® GPIO æ¨¡å¼
GPIO.setmode(GPIO.BCM)

# è®¾ç½® GPIO 17 ä¸ºè¾“å‡º
GPIO.setup(17, GPIO.OUT)

# ğŸš€ åœ¨è¿™é‡Œå†™ä½ çš„ä»£ç 
# ç‚¹äº® LED
GPIO.output(17, GPIO.HIGH)
time.sleep(1)

# ç†„ç­ LED
GPIO.output(17, GPIO.LOW)

# æ¸…ç†èµ„æº
GPIO.cleanup()
              `
            },
            
            validation: {
              type: 'code-execution',
              expectedOutput: {
                actions: [
                  { action: 'GPIO17_set_HIGH', time: 0 },
                  { action: 'GPIO17_set_LOW', time: 1000 }
                ]
              },
              testCases: [
                {
                  name: 'LED åº”è¯¥åœ¨ 0 ç§’æ—¶ç‚¹äº®',
                  check: 'LED_state === ON at t=0',
                  passed: true
                },
                {
                  name: 'LED åº”è¯¥åœ¨ 1 ç§’æ—¶ç†„ç­',
                  check: 'LED_state === OFF at t=1000',
                  passed: true
                }
              ]
            },
            
            help: {
              hint: 'â­ ä½¿ç”¨ GPIO.output() å‡½æ•°æ¥æ§åˆ¶',
              wrongAnswerExplanations: {
                'forgot_GPIO_cleanup': 'åˆ«å¿˜äº†åœ¨æœ€åæ¸…ç† GPIO èµ„æºï¼',
                'wrong_pin_number': 'ç¡®ä¿ä½¿ç”¨ GPIO 17ï¼Œä¸æ˜¯ç‰©ç†å¼•è„šå·',
                'logic_reversed': 'HIGH = ç‚¹äº®ï¼ŒLOW = ç†„ç­'
              }
            }
          }
        ],
        
        completionCriteria: {
          allTasksPassed: true,
          codeExecuted: true
        }
      }
    },

    {
      id: 'phase_3',
      type: 'CHALLENGE',
      title: 'ç¬¬ä¸‰é˜¶æ®µ: åˆ›æ„æŒ‘æˆ˜ (15 min)',
      description: 'å®Œæˆä¸€ä¸ªå¼€æ”¾å¼æŒ‘æˆ˜ï¼Œå±•ç¤ºä½ çš„åˆ›æ–°æ€ç»´',
      
      content: {
        format: 'creative-challenge',
        
        challenge: {
          title: 'åˆ¶ä½œä¸€ä¸ª SOS æ±‚æ•‘ç¯',
          briefing: `
ä½ ç°åœ¨æ˜¯ä¸€ååœ¨å­¤å²›ä¸Šçš„ç”µå­å·¥ç¨‹å¸ˆã€‚
ä½ éœ€è¦ç”¨æ ‘è“æ´¾å’Œä¸€ä¸ª LED ç¯å‘é€æ‘©å°”æ–¯ç”µç æ±‚æ•‘ä¿¡å·ã€‚
S = Â· Â· Â· (3 ä¸ªç‚¹)
O = âˆ’ âˆ’ âˆ’ (3 ä¸ªåˆ’)
S = Â· Â· Â· (3 ä¸ªç‚¹)
          `,
          
          requirements: {
            functional: [
              'ç”¨ GPIO 17 æ§åˆ¶ LED',
              'æ­£ç¡®å®ç°æ‘©å°”æ–¯ç”µç çš„ SOS åºåˆ—',
              'ç‚¹ (Â·) = LED äº® 0.1 ç§’',
              'åˆ’ (âˆ’) = LED äº® 0.3 ç§’',
              'å­—æ¯é—´éš” = 0.2 ç§’',
              'å­—ä¸å­—é—´éš” = 0.7 ç§’'
            ],
            optional: [
              'é‡å¤ SOS ä¿¡å·ç›´åˆ°æŒ‰ä¸‹ Ctrl+C',
              'æ·»åŠ æ³¨é‡Šè§£é‡Šä½ çš„ä»£ç é€»è¾‘',
              'ä¼˜åŒ–ä»£ç ï¼Œé¿å…é‡å¤ (ä½¿ç”¨å‡½æ•°æˆ–å¾ªç¯)'
            ]
          },
          
          startingCode: `
import RPi.GPIO as GPIO
import time

GPIO.setmode(GPIO.BCM)
GPIO.setup(17, GPIO.OUT)

# ğŸš€ å®ç° SOS æ‘©å°”æ–¯ç”µç 
# æç¤º: å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥é—ªçƒ LED

def blink(duration):
    GPIO.output(17, GPIO.HIGH)
    time.sleep(duration)
    GPIO.output(17, GPIO.LOW)
    time.sleep(0.1)

# åœ¨è¿™é‡Œå®ç° SOS...

GPIO.cleanup()
          `,
          
          evaluation: {
            automatic: {
              type: 'pattern-matching',
              checkPoints: [
                { check: 'SOS_pattern_correct', weight: 40 },
                { check: 'timing_accuracy', tolerance_ms: 50, weight: 30 },
                { check: 'code_cleanup', weight: 10 }
              ]
            },
            
            human: {
              type: 'peer-review',
              criteria: [
                { criterion: 'ä»£ç å¯è¯»æ€§', weight: 10 },
                { criterion: 'åˆ›æ„å®ç° (å¦‚æ˜¯å¦ä¼˜åŒ–æˆ–æ‰©å±•)', weight: 10 }
              ],
              enabled: true
            }
          },
          
          hints: [
            {
              level: 1,
              text: 'ğŸ’¡ ä½ å¯ä»¥å†™ä¸€ä¸ªå‡½æ•°æ¥å¤„ç†ç‚¹å’Œåˆ’'
            },
            {
              level: 2,
              text: 'ğŸ’¡ ä½¿ç”¨åˆ—è¡¨æ¥å­˜å‚¨ SOS çš„èŠ‚å¥æ¨¡å¼'
            },
            {
              level: 3,
              text: 'ç‚¹å‡»"æ˜¾ç¤ºè§£å†³æ–¹æ¡ˆ"çœ‹ä¸€ä¸ªç¤ºä¾‹'
            }
          ],
          
          exampleSolution: '/solutions/sos-morse-solution.py'
        }
      }
    },

    {
      id: 'phase_4',
      type: 'QUIZ',
      title: 'ç¬¬å››é˜¶æ®µ: çŸ¥è¯†æµ‹éªŒ (5 min)',
      description: 'æ£€éªŒä½ å¯¹ GPIO æ¦‚å¿µçš„æŒæ¡ç¨‹åº¦',
      
      content: {
        format: 'quiz',
        
        questions: [
          {
            id: 'q1',
            type: 'multiple-choice',
            question: 'ä¸‹åˆ—å“ªä¸ªä¸æ˜¯ GPIO çš„ç‰¹ç‚¹?',
            options: [
              'å¯ç¼–ç¨‹é…ç½®ä¸ºè¾“å…¥æˆ–è¾“å‡º',
              'å¯ä»¥ä¸å„ç§å¤–è®¾é€šä¿¡',
              'å·¥ä½œé¢‘ç‡ä¸èƒ½è¶…è¿‡ 1MHz',  // æ­£ç¡®ç­”æ¡ˆï¼ˆé”™è¯¯çš„è¯´æ³•ï¼‰
              'æ ‘è“æ´¾æœ‰ 40 ä¸ª GPIO é’ˆè„š'
            ],
            correctAnswer: 2,
            explanation: 'GPIO å®é™…ä¸Šå¯ä»¥å·¥ä½œåœ¨è¿œé«˜äº 1MHz çš„é¢‘ç‡ã€‚æ ‘è“æ´¾ GPIO å¯ä»¥å¤„ç†æ•° MHz çš„é¢‘ç‡ã€‚',
            difficulty: 'INTERMEDIATE'
          },
          
          {
            id: 'q2',
            type: 'true-false',
            question: 'åœ¨æ ‘è“æ´¾ä¸Šï¼ŒBCM ç¼–å·å’Œç‰©ç†å¼•è„šç¼–å·æ˜¯ä¸€æ ·çš„å—?',
            correctAnswer: false,
            explanation: 'ä¸ä¸€æ ·ã€‚BCM (Broadcom) ç¼–å·å’Œç‰©ç†ä½ç½®ç¼–å·ä¸åŒã€‚GPIO 17 åœ¨ç‰©ç†å¼•è„š 11ã€‚',
            difficulty: 'BEGINNER'
          },
          
          {
            id: 'q3',
            type: 'code-reading',
            question: 'è¿™æ®µä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆ?',
            code: `
GPIO.setup(17, GPIO.OUT)
GPIO.output(17, GPIO.HIGH)  # 1 ç§’äº®
time.sleep(1)
GPIO.output(17, GPIO.LOW)   # 1 ç§’ç­
time.sleep(1)
print("LED å·²å…³é—­")
            `,
            options: [
              'LED é—ªçƒ 1 ç§’äº® 1 ç§’ç­ï¼Œç„¶åæ‰“å°æ¶ˆæ¯',
              'LED ä¸€ç›´äº®ï¼Œæ‰“å°æ¶ˆæ¯',
              'LED ä¸€ç›´ç­ï¼Œæ‰“å°æ¶ˆæ¯',
              'ä»£ç é”™è¯¯'
            ],
            correctAnswer: 0,
            difficulty: 'INTERMEDIATE'
          }
        ],
        
        scoringRules: {
          passingScore: 60,         // 60% é€šè¿‡
          totalQuestions: 3,
          pointPerQuestion: 100 / 3,
          
          rewards: {
            perfectScore: {
              xp: 200,
              badge: 'gpio-expert'
            },
            passingScore: {
              xp: 100,
              message: 'å¾ˆå¥½ï¼ä½ æŒæ¡äº† GPIO åŸºç¡€ã€‚'
            },
            failingScore: {
              xp: 0,
              allowRetry: true,
              message: 'å†è¯•ä¸€æ¬¡å§ã€‚å›åˆ°ç†è®ºéƒ¨åˆ†å¤ä¹ ä¸€ä¸‹ã€‚'
            }
          }
        }
      }
    }
  ],

  // å…³å¡å®Œæˆåçš„æ€»ç»“
  completion: {
    summary: {
      title: 'æ­å–œï¼ä½ å·²æŒæ¡ GPIO åŸºç¡€',
      totalTimeSpent: 'calculated',
      performanceRating: 'calculated',  // A+ ~ D
      nextRecommendedSkill: 'PWM æ§åˆ¶ LED äº®åº¦'
    },
    
    rewards: {
      totalXP: 500,
      badge: 'gpio-master',
      unlockedSkills: ['PWMæ§åˆ¶LEDäº®åº¦', 'æŒ‰é’®è¾“å…¥æ£€æµ‹'],
      certificateEarned: true
    }
  }
}
```

---

#### FR-002: å…³å¡è¿›åº¦è·Ÿè¸ª âœ… å®æ—¶åé¦ˆç‰ˆ

**æè¿°**: å®æ—¶æ˜¾ç¤ºç”¨æˆ·åœ¨å½“å‰å…³å¡ä¸­çš„è¿›åº¦ï¼Œæä¾›å³æ—¶çš„æˆåŠŸ/å¤±è´¥åé¦ˆ

**è¿›åº¦è¿½è¸ªç³»ç»Ÿ**:
```javascript
const PROGRESS_TRACKING = {
  // å®æ—¶è¿›åº¦æ¡
  progressBar: {
    segments: [
      { id: 'phase_1', label: 'ç†è®º', progress: 100, status: 'completed' },
      { id: 'phase_2', label: 'å®è·µ', progress: 65, status: 'in-progress' },
      { id: 'phase_3', label: 'æŒ‘æˆ˜', progress: 0, status: 'locked' },
      { id: 'phase_4', label: 'æµ‹éªŒ', progress: 0, status: 'locked' }
    ],
    totalProgress: 41,  // (100 + 65 + 0 + 0) / 4
    estimatedTimeRemaining: 25  // åˆ†é’Ÿ
  },

  // æ¯ä¸ªç¯èŠ‚å†…çš„è¯¦ç»†è¿›åº¦
  phaseProgress: {
    current: 'phase_2',
    details: {
      tasksCompleted: 1,
      taskTotal: 2,
      percentComplete: 50,
      status: 'in-progress'
    }
  },

  // ç”¨æˆ·çš„å„é¡¹æŒ‡æ ‡
  performanceMetrics: {
    accuracy: {
      label: 'å‡†ç¡®åº¦',
      value: 90,
      unit: '%',
      color: '#00FFC2'  // è§å…‰é’
    },
    
    speed: {
      label: 'é€Ÿåº¦',
      value: 85,
      unit: '%',
      reference: 'average_learner',  // ç›¸å¯¹äºå¹³å‡å­¦ä¹ è€…
      color: '#FFD700'  // é‡‘è‰²
    },
    
    attempts: {
      label: 'å°è¯•æ¬¡æ•°',
      value: 3,
      reference: 'phase_2_step_2'
    },
    
    timeElapsed: {
      label: 'å·²èŠ±æ—¶é—´',
      value: 20,
      unit: 'min',
      estimatedTotal: 45
    }
  },

  // å®æ—¶åé¦ˆæ¶ˆæ¯
  feedback: {
    onSuccess: {
      immediate: {
        type: 'celebration',
        animation: 'confetti',
        sound: 'success_chime.mp3',
        message: 'âœ¨ å®Œç¾ï¼ç”µè·¯è¿æ¥æ­£ç¡®ï¼',
        duration: 2000
      },
      
      delayed: {
        type: 'encouragement',
        delay: 3000,
        message: 'ä½ çš„è¿æ¥é€Ÿåº¦æ¯”å¹³å‡æ°´å¹³å¿« 15%ï¼',
        xpEarned: 50
      }
    },
    
    onFailure: {
      immediate: {
        type: 'hint',
        message: 'âš ï¸ LED çš„æ­£æä¼¼ä¹æ²¡æœ‰æ¥åˆ° GPIO 17',
        color: '#FF6B35'  // æ©™çº¢
      },
      
      progressive: [
        {
          attempt: 1,
          hint: 'ğŸ’¡ æç¤º: æ£€æŸ¥ LED çš„é•¿å¼•è„š'
        },
        {
          attempt: 2,
          hint: 'ğŸ’¡ æç¤º: LED çš„é•¿å¼•è„šåº”è¯¥è¿æ¥åˆ° GPIO 17'
        },
        {
          attempt: 3,
          hint: 'ğŸ’¡ æ˜¾ç¤ºå®Œæ•´è§£å†³æ–¹æ¡ˆ?',
          canReveal: true
        }
      ]
    }
  }
}
```

---

#### FR-003: ä»£ç ç¼–è¾‘å™¨é›†æˆ âœ… IDE ç‰ˆ

**æè¿°**: åœ¨é¡µé¢å†…åµŒå…¥åŠŸèƒ½å®Œæ•´çš„ä»£ç ç¼–è¾‘å™¨ï¼Œæ”¯æŒå®æ—¶æ‰§è¡Œå’Œåé¦ˆ

**ä»£ç ç¼–è¾‘å™¨é…ç½®**:
```javascript
const CODE_EDITOR_CONFIG = {
  // IDE ç¯å¢ƒ
  environment: {
    type: 'web-based-ide',
    languages: ['python', 'javascript', 'c++'],
    defaultLanguage: 'python',
    
    // æ‰§è¡Œç¯å¢ƒï¼ˆæ²™ç®±ï¼‰
    sandbox: {
      type: 'docker-container',
      image: 'python:3.9-slim',
      timeout: 10000,  // 10 ç§’è¶…æ—¶
      memoryLimit: '256MB',
      
      preInstalledLibraries: [
        'RPi.GPIO',
        'time',
        'math',
        'random'
      ]
    }
  },

  // ç¼–è¾‘å™¨åŠŸèƒ½
  features: {
    syntax-highlighting: {
      enabled: true,
      theme: 'dark-cyberpunk'
    },
    
    auto-completion: {
      enabled: true,
      suggestions: [
        'GPIO.setup',
        'GPIO.output',
        'GPIO.input',
        'time.sleep',
        'GPIO.HIGH',
        'GPIO.LOW'
      ]
    },
    
    error-detection: {
      enabled: true,
      realTime: true,
      highlightErrors: true
    },
    
    code-formatting: {
      enabled: true,
      formatter: 'black',
      onSave: true
    },
    
    version-control: {
      enabled: true,
      saveHistory: true,
      maxSnapshots: 10
    }
  },

  // æ‰§è¡Œå’Œæµ‹è¯•
  execution: {
    runCode: {
      button: 'â–¶ è¿è¡Œä»£ç ',
      hotkey: 'Ctrl+Enter',
      
      // æ‰§è¡Œæµç¨‹
      process: [
        { step: 1, action: 'validateSyntax', timeout: 2000 },
        { step: 2, action: 'analyzeDependencies', timeout: 1000 },
        { step: 3, action: 'initializeSimulator', timeout: 2000 },
        { step: 4, action: 'executeCode', timeout: 10000 },
        { step: 5, action: 'collectOutput', timeout: 1000 },
        { step: 6, action: 'validateOutput', timeout: 2000 }
      ]
    },

    // æµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨åŒ–
    testCases: [
      {
        name: 'GPIO 17 åº”è¯¥è¢«è®¾ç½®ä¸ºè¾“å‡º',
        code: 'assert GPIO.gpio_function(17) == GPIO.OUT',
        weight: 30
      },
      {
        name: 'LED åº”è¯¥åœ¨ç¬¬ 0 ç§’äº®èµ·',
        code: 'assert LED_state_at_time(0) == HIGH',
        weight: 40
      },
      {
        name: 'LED åº”è¯¥åœ¨ç¬¬ 1 ç§’ç†„ç­',
        code: 'assert LED_state_at_time(1000) == LOW',
        weight: 30
      }
    ]
  },

  // è¾“å‡ºé¢æ¿
  outputPanel: {
    sections: [
      {
        id: 'console',
        label: 'æ§åˆ¶å°è¾“å‡º',
        content: 'simulation_output_stream'
      },
      {
        id: 'simulation',
        label: 'ç¡¬ä»¶æ¨¡æ‹Ÿå™¨',
        content: 'virtual_circuit_state'
      },
      {
        id: 'errors',
        label: 'é”™è¯¯æ—¥å¿—',
        content: 'error_messages'
      }
    ]
  }
}
```

---

#### FR-004: å¤šç»´åº¦æˆå°±ç³»ç»Ÿ âœ… å³æ—¶æ¿€åŠ±ç‰ˆ

**æè¿°**: ä¸ä»…åŸºäºæ­£ç¡®æ€§è¯„ä¼°ï¼Œè¿˜åŸºäºå­¦ä¹ é€Ÿåº¦ã€åˆ›æ–°åº¦ã€åŠªåŠ›ç¨‹åº¦ç­‰å¤šç»´åº¦ç»™äºˆæˆå°±

**æˆå°±ç³»ç»Ÿé…ç½®**:
```javascript
const ACHIEVEMENT_SYSTEM = {
  dimensions: [
    {
      id: 'accuracy',
      name: 'å‡†ç¡®åº¦',
      weight: 40,
      thresholds: {
        perfect: { score: 100, badge: 'gpio-precision', xp: 200 },
        excellent: { score: 90, badge: 'gpio-expert', xp: 150 },
        good: { score: 80, xp: 100 },
        passing: { score: 60, xp: 50 }
      }
    },
    
    {
      id: 'speed',
      name: 'é€Ÿåº¦',
      weight: 20,
      reference: 'average_learner',
      bonuses: [
        {
          condition: 'completed_in_50%_of_estimated_time',
          badge: 'flash-learner',
          xp: 150
        },
        {
          condition: 'completed_faster_than_99%_of_peers',
          badge: 'speed-demon',
          xp: 200
        }
      ]
    },
    
    {
      id: 'persistence',
      name: 'åšæŒåº¦',
      weight: 15,
      metrics: [
        {
          metric: 'attempts_until_success',
          thresholds: {
            first_try: { badge: 'first-blood', xp: 100 },
            second_try: { xp: 75 },
            multiple_tries: { badge: 'perseverance', xp: 50 }
          }
        },
        {
          metric: 'no_skip_hints',
          badge: 'independent-thinker',
          xp: 100
        }
      ]
    },
    
    {
      id: 'creativity',
      name: 'åˆ›æ„åº¦',
      weight: 15,
      unlocks: [
        {
          condition: 'creative_challenge_completed',
          evaluation: 'peer-review',
          badge: 'innovator',
          xp: 200
        },
        {
          condition: 'extended_solution_beyond_requirements',
          badge: 'overachiever',
          xp: 150
        }
      ]
    }
  ],

  // å®æ—¶æˆå°±é€šçŸ¥
  notifications: {
    onAchievementUnlock: {
      animation: 'badge-popup',
      sound: 'achievement_unlock.mp3',
      position: 'top-center',
      duration: 3000
    },
    
    onMilestone: {
      animation: 'milestone-banner',
      sound: 'milestone_reached.mp3',
      message: 'ğŸ‰ ä½ å®Œæˆäº†ç¬¬ä¸€ä¸ªç¡¬ä»¶é¡¹ç›®ï¼',
      sharable: true
    }
  }
}
```

---

#### FR-005: ç¤¾äº¤äº’åŠ¨ä¸åŒä¼´å­¦ä¹  âœ… åä½œç‰ˆ

**æè¿°**: å…è®¸ç”¨æˆ·çœ‹åˆ°åŒä¼´çš„è¿›åº¦ã€å¯»æ±‚å¸®åŠ©ã€åˆ†äº«æˆå°±

**ç¤¾äº¤äº’åŠ¨é…ç½®**:
```javascript
const SOCIAL_FEATURES = {
  // åŒä¼´è¿›åº¦å¯è§†åŒ–ï¼ˆåŒ¿åï¼‰
  peerInsights: {
    enabled: true,
    privacy: 'anonymous',
    
    display: {
      averageScore: {
        label: 'å¹³å‡é€šè¿‡ç‡',
        value: '78%',
        yourScore: '92%',
        color: '#00FFC2'
      },
      
      averageTime: {
        label: 'å¹³å‡ç”¨æ—¶',
        value: '48 åˆ†é’Ÿ',
        yourTime: '35 åˆ†é’Ÿ',
        badge: 'faster-than-average'
      },
      
      attemptDistribution: {
        label: 'å°è¯•æ¬¡æ•°åˆ†å¸ƒ',
        chart: 'histogram',
        yourAttempts: 2,
        medianAttempts: 3
      }
    }
  },

  // å¯»æ±‚å¸®åŠ©åŠŸèƒ½
  getHelp: {
    askCommunity: {
      enabled: true,
      placeholder: 'æè¿°ä½ å¡ä½çš„åœ°æ–¹...',
      responseTime: 'average: 2 hours',
      
      helpOptions: [
        {
          type: 'ask-question',
          label: 'æå‡ºé—®é¢˜',
          icon: 'ğŸ’¬'
        },
        {
          type: 'request-peer-review',
          label: 'è¯·æ±‚åŒä¼´è¯„å®¡',
          icon: 'ğŸ‘¥'
        },
        {
          type: 'discuss-alternative-solutions',
          label: 'è®¨è®ºå…¶ä»–è§£å†³æ–¹æ¡ˆ',
          icon: 'ğŸ’¡'
        }
      ]
    },

    askTutor: {
      enabled: true,
      costXP: 200,  // æ¶ˆè€— XP è·å–ä¸“ä¸šå¯¼å¸ˆå¸®åŠ©
      responseTime: '< 30 min',
      
      serviceLevel: [
        { level: 'hint', cost: 100, description: 'è·å–ä¸€ä¸ªæç¤º' },
        { level: 'explanation', cost: 200, description: 'è¯¦ç»†è®²è§£' },
        { level: 'code-review', cost: 300, description: 'ä»£ç è¯„å®¡' }
      ]
    }
  },

  // åˆ†äº«æˆå°±
  shareAchievements: {
    enabled: true,
    
    shareTargets: [
      {
        platform: 'internal',
        label: 'åˆ†äº«åˆ° KNZN ç¤¾åŒº',
        icon: 'ğŸ”—',
        message: 'æˆ‘åˆšåˆšæŒæ¡äº† GPIO åŸºç¡€ï¼åŠ å…¥æˆ‘æ¥æ¢ç´¢ç¡¬ä»¶ä¸–ç•Œå§ï¼'
      },
      {
        platform: 'twitter',
        label: 'åˆ†äº«åˆ° Twitter',
        icon: 'ğŸ¦',
        template: 'æˆ‘ç”¨ @KNZNhw å®Œæˆäº†"GPIO åŸºç¡€"å…³å¡ï¼ğŸ‰ #HardwareLearning'
      },
      {
        platform: 'linkedin',
        label: 'åˆ†äº«åˆ° LinkedIn',
        icon: 'ğŸ’¼',
        template: 'æˆ‘å®Œæˆäº†ç¡¬ä»¶å­¦ä¹ å¹³å° KNZN ä¸Šçš„ GPIO åŸºç¡€è¯¾ç¨‹ï¼Œè·å¾—äº†"GPIO å¤§å¸ˆ"å¾½ç« '
      }
    ],
    
    shareableCard: {
      includes: ['badge', 'score', 'learnerName', 'timestamp', 'achievementIcon']
    }
  }
}
```

---

#### FR-006: å­¦ä¹ åˆ†æä¸ä¸ªæ€§åŒ–å»ºè®® âœ… AI é©±åŠ¨ç‰ˆ

**æè¿°**: ä½¿ç”¨å­¦ä¹ æ•°æ®åˆ†ææ¨èä¸‹ä¸€æ­¥å­¦ä¹ è·¯å¾„ï¼Œè¯†åˆ«å­¦ä¹ ç“¶é¢ˆ

**å­¦ä¹ åˆ†æé…ç½®**:
```javascript
const LEARNING_ANALYTICS = {
  // ç”¨æˆ·å­¦ä¹ æ¨¡å¼è¯†åˆ«
  learningProfile: {
    learningStyle: 'kinesthetic-visual',  // é€šè¿‡å®è·µå’Œå¯è§†åŒ–å­¦ä¹ æœ€å¥½
    
    strengths: [
      { area: 'å®è·µæ“ä½œ', confidence: 95 },
      { area: 'å¿«é€Ÿç†è§£', confidence: 85 },
      { area: 'ä»£ç ç¼–å†™', confidence: 80 }
    ],
    
    weaknesses: [
      { area: 'ç†è®ºæ¦‚å¿µ', confidence: 60 },
      { area: 'æ•°å­¦è®¡ç®—', confidence: 55 }
    ],
    
    recommendedNextSteps: [
      {
        priority: 1,
        skill: 'PWM è„‰å†²å®½åº¦è°ƒåˆ¶',
        reason: 'ä½ åœ¨å®è·µç¯èŠ‚è¡¨ç°å‡ºè‰²ï¼ŒPWM ä¼šè¿›ä¸€æ­¥å‘æŒ¥ä½ çš„ä¼˜åŠ¿',
        difficulty: 'INTERMEDIATE',
        estimatedDuration: 50
      },
      {
        priority: 2,
        skill: 'æŒ‰é’®è¾“å…¥ä¸ä¸­æ–­',
        reason: 'è¿™æ˜¯ä¸ GPIO è¾“å‡ºå¯¹åº”çš„æŠ€èƒ½ï¼Œå®Œæ•´æŒæ¡åŒå‘é€šä¿¡',
        difficulty: 'INTERMEDIATE'
      }
    ]
  },

  // å­¦ä¹ ç“¶é¢ˆè¯†åˆ«
  bottleneckDetection: {
    enabled: true,
    
    detectedIssues: [
      {
        issue: 'é¢‘ç¹åœ¨ç›¸åŒé”™è¯¯ä¸Šé‡å¤å°è¯•',
        affectedArea: 'phase_2_step_2',
        severity: 'medium',
        recommendation: 'å»ºè®®æŸ¥çœ‹å®Œæ•´è§£å†³æ–¹æ¡ˆå’Œä»£ç è®²è§£è§†é¢‘'
      }
    ]
  },

  // ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„è°ƒæ•´
  adaptivePath: {
    enabled: true,
    algorithm: 'reinforcement-learning',
    
    adjustments: [
      {
        trigger: 'struggling_with_concept',
        action: 'suggest_additional_resources',
        resources: [
          'explainer-video-on-gpio-voltage',
          'interactive-breadboard-simulator',
          'peer-discussion-forum'
        ]
      },
      {
        trigger: 'progressing_faster_than_average',
        action: 'offer_challenge_mode',
        challenges: [
          'multi-LED-control',
          'sensor-integration',
          'autonomous-robot-control'
        ]
      }
    ]
  }
}
```

---

#### FR-007: å¸ƒå±€ä¸è§†çª—ç®¡ç† âœ… æ™ºèƒ½åˆ†å±ç‰ˆ

**æè¿°**: å®šä¹‰ IDEã€ç¡¬ä»¶æ¨¡æ‹Ÿå™¨ã€ä»»åŠ¡ä¹¦çš„ç©ºé—´å…³ç³»ï¼Œæ”¯æŒæ‹–æ‹½æ”¹å¤§å°ã€Zen Modeã€å®æ—¶åŒæ­¥

**æ™ºèƒ½åˆ†å±ç³»ç»Ÿ**:
```javascript
const SMART_SPLIT_PANES = {
  name: 'FR-007: å¸ƒå±€ä¸è§†çª—ç®¡ç†',
  description: 'å®šä¹‰ IDEã€æ¨¡æ‹Ÿå™¨ã€ä»»åŠ¡ä¹¦çš„ç©ºé—´å…³ç³»åŠå®æ—¶åŒæ­¥',

  // é»˜è®¤å¸ƒå±€
  defaultLayout: {
    desktop: {
      name: 'Classic Split',
      layout: `
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sidebar (20%)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Task Desc (20%) â”‚ IDE (40%) â”‚ Sim (40%) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      `,
      components: {
        sidebar: {
          width: '100%',
          height: '80px',
          contents: ['BreadcrumbNav', 'ProgressBar', 'MetricsDisplay']
        },
        
        main: {
          display: 'flex',
          layout: '20-40-40',
          
          taskPanel: {
            width: '20%',
            content: 'TaskDescription',
            scrollable: true,
            resizable: true,
            minWidth: '250px',
            maxWidth: '400px'
          },
          
          codePanel: {
            width: '40%',
            content: 'CodeEditor',
            scrollable: true,
            resizable: true
          },
          
          simulatorPanel: {
            width: '40%',
            content: 'HardwareSimulator',
            scrollable: true,
            resizable: true
          }
        }
      }
    }
  },

  // ç”¨æˆ·è‡ªå®šä¹‰å¸ƒå±€
  customLayouts: [
    {
      name: 'Code-First (ä¸“æ³¨ç¼–ç )',
      description: 'IDE å  70%ï¼Œæ¨¡æ‹Ÿå™¨å  30%',
      layout: '70-30',
      icon: 'ğŸ’»'
    },
    {
      name: 'Visual-First (å…³æ³¨ç”µè·¯)',
      description: 'IDE å  30%ï¼Œæ¨¡æ‹Ÿå™¨å  70%',
      layout: '30-70',
      icon: 'ğŸ”Œ'
    },
    {
      name: 'Fullscreen IDE (æ²‰æµ¸ç¼–ç )',
      description: 'IDE å…¨å±ï¼Œæ¨¡æ‹Ÿå™¨æŠ˜å ä¸ºå³ä¾§å°çª—',
      layout: '95-5',
      icon: 'ğŸ–¥ï¸'
    }
  ],

  // æ‹–æ‹½æ”¹å¤§å°
  resizable: {
    enabled: true,
    dividers: [
      {
        between: 'taskPanel',
        and: 'codePanel',
        direction: 'vertical',
        cursor: 'col-resize',
        behavior: 'smooth'
      }
    ],
    
    // è®°å¿†ç”¨æˆ·çš„åå¥½è®¾ç½®
    rememberPreference: {
      enabled: true,
      storage: 'localStorage',
      key: 'lesson_layout_preference',
      resetOnNewLesson: false
    }
  },

  // Zen Mode: æœ€å°åŒ–å¹²æ‰°
  zenMode: {
    enabled: true,
    trigger: 'hotkey-Z',
    
    effect: {
      hide: [
        'Sidebar',
        'TaskDescription',
        'PerformanceMetrics',
        'AllButtons'
      ],
      
      show: [
        'CodeEditor',
        'HardwareSimulator'
      ],
      
      styling: {
        background: {
          from: 'radial-gradient(#FF00FF, #00FFFF)',  // åŸå§‹éœ“è™¹é£
          to: '#0A0E27'                                // Zen Mode: æ·±é»‘
        },
        
        neonGlow: {
          intensity: 0.2,    // é™ä½éœ“è™¹å…‰æ•ˆ 20%
          duration: 'instant'
        }
      },
      
      behavior: {
        showMinimalUI: true,
        hideAfterXSeconds: false,
        exitWith: 'ESC key or mouse move to top'
      }
    }
  }
}
```

---

#### FR-008: æ™ºèƒ½è°ƒè¯•ä¸é”™è¯¯äººæ€§åŒ– âœ… æ­¥è¿›æ‰§è¡Œç‰ˆ

**æè¿°**: å°†æ™¦æ¶©çš„é”™è¯¯ç¿»è¯‘æˆäººç±»å¯ç†è§£çš„è¯­è¨€ï¼Œå¹¶æ”¯æŒé€è¡Œæ‰§è¡Œå’Œç¡¬ä»¶æ—¶åºå¯è§†åŒ–

**æ™ºèƒ½é”™è¯¯ç¿»è¯‘ç³»ç»Ÿ**:
```javascript
const SMART_ERROR_TRANSLATION = {
  name: 'FR-008: æ™ºèƒ½è°ƒè¯•',
  description: 'å°†æ™¦æ¶©çš„é”™è¯¯ç¿»è¯‘æˆå¯ç†è§£çš„äººè¯ï¼Œå¹¶æä¾›ä¿®å¤å»ºè®®',

  // é”™è¯¯ç±»å‹è¯†åˆ«
  errorPatterns: [
    {
      pattern: 'NameError: name \'(\w+)\' is not defined',
      category: 'undefined-variable',
      
      humanTranslation: (match) => `
ğŸ¤– æŒ‡æŒ¥å®˜ï¼Œæˆ‘æ‰¾ä¸åˆ°ä¸€ä¸ªå« "${match[1]}" çš„æŒ‡ä»¤æˆ–å˜é‡ã€‚

å¯èƒ½çš„åŸå› ï¼š
1. æ‹¼å†™é”™è¯¯ï¼ˆä¾‹å¦‚ 'GPI' åº”è¯¥æ˜¯ 'GPIO'ï¼‰
2. å˜é‡æ²¡æœ‰å®šä¹‰ï¼ˆä½ éœ€è¦å…ˆèµ‹å€¼ç»™å®ƒï¼‰
3. ç¼ºå°‘ importï¼ˆä¾‹å¦‚ 'time' éœ€è¦ 'import time'ï¼‰

å»ºè®®æ£€æŸ¥ï¼š
â€¢ ç¬¬ ${highlightedLine} è¡Œçš„è¿™ä¸ªè¯
â€¢ ä½ æ˜¯å¦å·²ç»å¯¼å…¥äº†æ‰€éœ€çš„æ¨¡å—
â€¢ å˜é‡åæ˜¯å¦ä¸€è‡´
      `,
      
      suggestions: [
        'Check for typos in variable/function names',
        'Make sure all modules are imported',
        'Verify variable initialization'
      ],
      
      highlightCode: true,
      offendingLine: true
    },

    {
      pattern: 'IndentationError: unexpected indent',
      category: 'indentation-error',
      
      humanTranslation: `
ğŸ¤– ç¼©è¿›é”™è¯¯ï¼šä½ çš„ä»£ç è¡Œç¼©è¿›ä¸å¯¹ã€‚

Python éå¸¸åœ¨æ„ç¼©è¿›ï¼å®ƒç”¨ç¼©è¿›æ¥åˆ¤æ–­ä»£ç å—çš„èŒƒå›´ã€‚

è§„åˆ™ï¼š
â€¢ if/for/while åçš„ä»£ç éœ€è¦ç¼©è¿›
â€¢ åŒä¸€ä¸ªå—çš„ä»£ç ç¼©è¿›å¿…é¡»ä¸€è‡´
â€¢ é€šå¸¸ç¼©è¿› 4 ä¸ªç©ºæ ¼
      `,
      
      autoFix: {
        enabled: true,
        action: 'highlight-problematic-line',
        offering: 'Would you like me to auto-fix the indentation?'
      }
    }
  ],

  // æ­¥è¿›æ‰§è¡Œè°ƒè¯•
  stepThroughDebugging: {
    name: 'Step Debugger',
    enabled: true,
    
    ui: {
      button: {
        label: 'ğŸ¢ é€è¡Œæ‰§è¡Œ',
        position: 'code-editor-toolbar',
        hotkey: 'F10'
      }
    },
    
    behavior: {
      mode: 'step-execution',
      
      features: [
        {
          feature: 'line-by-line-execution',
          effect: 'execute-one-line-at-a-time',
          control: 'Step Over (F10) / Step Into (F11)'
        },
        {
          feature: 'variable-watch',
          effect: 'show-all-variables-and-their-values',
          panel: 'right-sidebar',
          updates: 'after-each-line'
        },
        {
          feature: 'hardware-state-tracking',
          effect: 'simulator-updates-in-real-time',
          synchronization: 'instant'
        }
      ]
    },

    // æ—¶åºå¯è§†åŒ–
    timingVisualization: {
      enabled: true,
      description: 'ç”¨æ—¶é—´è½´æ˜¾ç¤ºä»£ç æ‰§è¡Œæ—¶åºå’Œç¡¬ä»¶å“åº”',
      
      visualization: {
        type: 'timeline',
        shows: [
          {
            track: 'Code Execution',
            events: [
              { time: 0, action: 'GPIO.setup(17, OUT)', color: '#00FFC2' },
              { time: 0, action: 'GPIO.output(17, HIGH)', color: '#00FFC2' },
              { time: 1000, action: 'time.sleep(1)', color: '#FFD700' },
              { time: 2000, action: 'GPIO.output(17, LOW)', color: '#FF6B35' }
            ]
          },
          {
            track: 'Hardware State',
            events: [
              { time: 0, state: 'GPIO 17 â†’ HIGH', color: '#33FF00' },
              { time: 1000, state: 'LED ON', color: '#33FF00' },
              { time: 2000, state: 'LED OFF', color: '#666666' }
            ]
          }
        ],
        
        alignment: 'synchronized',
        synchronizationLatency: '< 50ms'
      }
    }
  }
}
```

---

#### FR-009: ç§»åŠ¨ç«¯é€‚é… âœ… æ¸è¿›å¼é™çº§ç‰ˆ

**æè¿°**: é’ˆå¯¹ç§»åŠ¨ç«¯çš„ç‰¹æ®Šé€‚é…ï¼ŒåŒ…æ‹¬å¼ºåˆ¶æ¡Œé¢ç«¯ã€ä¼´ä¾£æ¨¡å¼ã€æ¸è¿›å¼é™çº§ä¸‰ç§æ–¹æ¡ˆ

**ç§»åŠ¨ç«¯ç­–ç•¥**:
```javascript
const MOBILE_STRATEGY = {
  // æ–¹æ¡ˆ A: å¼ºåˆ¶æ¡Œé¢ç«¯ï¼ˆæ¿€è¿›ä½†æ˜ç¡®ï¼‰
  restrictedPhasesOnMobile: {
    phase_1_theory: {
      enabled: true,
      reason: 'ä»…é™è§†é¢‘å’Œé€‰æ‹©é¢˜'
    },
    
    phase_2_practical: {
      enabled: false,
      recommendation: 'å»ºè®®åœ¨ PC ç«¯è¿›è¡Œä»¥è·å¾—æœ€ä½³ä½“éªŒ',
      fallbackUI: {
        type: 'device-upgrade-prompt',
        message: 'âš ï¸ Phase 2 (å®è·µ) éœ€è¦åœ¨æ¡Œé¢ç«¯å®Œæˆã€‚ä»£ç ç¼–è¾‘å’Œç”µè·¯è®¾è®¡åœ¨æ‰‹æœºä¸Šä½“éªŒä¸ä½³ã€‚',
        cta: [
          {
            label: 'åœ¨ PC æµè§ˆå™¨æ‰“å¼€',
            action: 'open-on-desktop'
          },
          {
            label: 'ç»§ç»­è§‚çœ‹æ•™å­¦è§†é¢‘',
            action: 'stay-on-phase-1'
          }
        ]
      }
    }
  },

  // æ–¹æ¡ˆ B: ä¼´ä¾£æ¨¡å¼ï¼ˆåŒå±åä½œï¼‰
  companionMode: {
    name: 'ä¼´ä¾£æ¨¡å¼',
    description: 'æ‰‹æœºä½œä¸ºç¬¬äºŒå±å¹•ï¼Œå±•ç¤ºä»»åŠ¡ä¹¦å’ŒåŸç†å›¾',
    enabled: true,
    
    // ä¸»å±å¹• (PC/Tablet)
    primaryScreen: {
      displays: ['IDE', 'HardwareSimulator'],
      layout: '50-50-split',
      focusAreas: ['code-editing', 'circuit-visualization']
    },

    // ä¼´ä¾£å±å¹• (æ‰‹æœº)
    companionScreen: {
      displays: ['TaskDescription', 'CircuitDiagram', 'Hints'],
      layout: 'vertical-stack',
      
      features: {
        liveSyncWithPrimary: {
          enabled: true,
          syncEvents: [
            'code-execution-started',
            'circuit-validation-result',
            'hint-requested'
          ],
          protocol: 'WebSocket',
          latency: '< 100ms'
        },
        
        quickActionsBar: {
          buttons: [
            {
              id: 'run-code',
              label: 'â–¶ è¿è¡Œ',
              sendsToPC: true
            },
            {
              id: 'hint',
              label: 'ğŸ’¡ æç¤º',
              sendsToPC: true
            }
          ]
        }
      }
    },

    // é…å¯¹æœºåˆ¶
    pairing: {
      method: 'qr-code',
      flow: `
1. ç”¨æˆ·åœ¨ PC å¼€å¯ Phase 2
2. PC å±å¹•å³ä¸‹è§’å‡ºç° "ä¼´ä¾£æ¨¡å¼" æŒ‰é’®
3. ç‚¹å‡»åç”Ÿæˆ QR ç 
4. ç”¨æ‰‹æœºæ‰«æ QR ç ï¼Œè‡ªåŠ¨è¿æ¥
5. æ‰‹æœºæ˜¾ç¤ºä»»åŠ¡ä¹¦å’ŒåŸç†å›¾ï¼ŒPC å…¨å± IDE
      `,
      pairing_timeout: 300000,  // 5 åˆ†é’Ÿè¶…æ—¶
      security: 'session-based'
    }
  },

  // æ–¹æ¡ˆ C: æ¸è¿›å¼é™çº§ï¼ˆæœ€å®ç”¨ï¼‰
  progressiveDegradation: {
    mobile_portrait: {
      layouts: [
        {
          priority: 1,
          component: 'TaskDescription',
          height: '25%',
          scrollable: true
        },
        {
          priority: 2,
          component: 'CodeEditor',
          height: '50%',
          scrollable: true,
          expandable: true
        },
        {
          priority: 3,
          component: 'HardwareSimulator',
          height: '25%',
          scrollable: true,
          collapsible: true
        }
      ],
      
      // è‡ªé€‚åº”ç¼–è¾‘å™¨
      codeEditor: {
        fontSize: '12px',
        height: 'auto',
        minLines: 10,
        maxLines: 20,
        
        mobileOptimizations: {
          fullscreenEditMode: {
            enabled: true,
            gesture: 'swipe-up',
            hidesTaskDescription: true,
            hidesSimulator: true
          },
          
          codeTemplateSnippets: {
            enabled: true,
            snippets: [
              { label: 'GPIO è®¾ç½®', code: 'GPIO.setup(17, GPIO.OUT)' },
              { label: 'LED äº®', code: 'GPIO.output(17, GPIO.HIGH)' },
              { label: 'LED ç­', code: 'GPIO.output(17, GPIO.LOW)' }
            ],
            tapToInsert: true
          }
        }
      }
    }
  }
}
```

---

#### FR-010: çŠ¶æ€æŒä¹…åŒ–ä¸é˜²æŒ«è´¥æœºåˆ¶ âœ… å¤šå±‚å¤‡ä»½ç‰ˆ

**æè¿°**: è‡ªåŠ¨å¿«ç…§ç³»ç»Ÿï¼Œé˜²æ­¢ç”¨æˆ·å› é¡µé¢åˆ·æ–°ã€ç½‘ç»œæ–­å¼€ç­‰åŸå› ä¸¢å¤±è¿›åº¦

**è‡ªåŠ¨å¿«ç…§ç³»ç»Ÿ**:
```javascript
const AUTO_SNAPSHOT_SYSTEM = {
  enabled: true,
  
  // å¿«ç…§è§¦å‘æ¡ä»¶
  triggers: [
    {
      event: 'code-change',
      debounceMs: 1000,
      condition: 'codeLength > 50 characters'
    },
    {
      event: 'circuit-change',
      immediatelyAfter: 'breadboard-connection',
      debounceMs: 500
    },
    {
      event: 'time-based',
      interval: 30000         // æ¯ 30 ç§’è‡ªåŠ¨ä¿å­˜
    },
    {
      event: 'before-navigation',
      when: 'user-tries-to-leave-with-unsaved-changes'
    }
  ],

  // å­˜å‚¨ç­–ç•¥ï¼ˆå¤šå±‚å¤‡ä»½ï¼‰
  storageStrategy: {
    layer1: {
      name: 'IndexedDB (æœ¬åœ°æµè§ˆå™¨)',
      capacity: '50MB',
      persistence: 'browser-session + local-storage',
      latency: '< 10ms',
      reliability: 'medium'
    },
    
    layer2: {
      name: 'åç«¯æ•°æ®åº“',
      capacity: 'unlimited',
      persistence: 'permanent',
      latency: '200-500ms',
      reliability: 'high',
      
      validationRules: [
        'code-length > 20 characters',
        'circuit-is-valid',
        'no-syntax-errors'
      ]
    },
    
    syncStrategy: {
      method: 'optimistic-update',
      flow: `
1. ç”¨æˆ·ä¿®æ”¹ä»£ç  â†’ ç«‹å³ä¿å­˜åˆ° IndexedDB
2. åŒæ—¶å¼‚æ­¥ä¸Šä¼ åˆ°åç«¯
3. åç«¯è¿”å›ç¡®è®¤ â†’ æ ‡è®°ä¸º "å·²å¤‡ä»½"
4. å¦‚æœä¸Šä¼ å¤±è´¥ â†’ é‡è¯•ï¼ˆæŒ‡æ•°é€€é¿ï¼‰
5. å¦‚æœ 30 ç§’åä»æœªæˆåŠŸ â†’ ç¦»çº¿è­¦å‘Š âš ï¸
      `
    }
  },

  // æ¢å¤æœºåˆ¶
  recovery: {
    onPageReload: {
      detection: 'page-refresh-or-crash',
      flow: `
1. é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ IndexedDB
2. æ‰¾åˆ°æœ€æ–°å¿«ç…§ â†’ è‡ªåŠ¨æ¢å¤
3. å¼¹å‡ºé€šçŸ¥: "ä½ çš„ä»£ç å·²æ¢å¤ã€‚ä¸Šæ¬¡ä¿å­˜äº 2 åˆ†é’Ÿå‰ã€‚"
4. æ˜¾ç¤º [è¿˜åŸ] [æ”¾å¼ƒ] æŒ‰é’®
5. è‡ªåŠ¨é€‰æ‹©è¿˜åŸï¼Œ30 ç§’åè‡ªåŠ¨ç¡®è®¤
      `,
      ui: {
        type: 'notification-bar',
        position: 'top',
        background: '#FFD700',
        icon: 'ğŸ’¾',
        message: 'âœ… ä½ çš„ä»£ç å·²è‡ªåŠ¨æ¢å¤',
        buttons: [
          {
            label: 'æŸ¥çœ‹è¿˜åŸçš„ä»£ç ',
            action: 'scroll-to-editor'
          }
        ]
      }
    },

    onNetworkDisconnect: {
      detection: 'navigator.onLine === false',
      behavior: {
        workOffline: true,
        UI: 'âš ï¸ ç½‘ç»œå·²æ–­å¼€ã€‚ä½ çš„æ›´æ”¹ä»åœ¨æœ¬åœ°ä¿å­˜ã€‚',
        syncWhenOnline: true
      }
    }
  },

  // ç‰ˆæœ¬å†å²
  versionHistory: {
    enabled: true,
    maxSnapshots: 20,
    
    ui: {
      timeline: {
        type: 'horizontal-timeline',
        position: 'bottom-of-editor',
        label: 'ğŸ• å†å²ç‰ˆæœ¬',
        maxDisplay: 5,
        expandable: true
      },
      
      restore: {
        action: 'click-snapshot',
        confirmation: 'è¿™ä¼šè¦†ç›–å½“å‰ä»£ç ï¼Œç¡®å®šå—ï¼Ÿ',
        buttons: ['è¿˜åŸ', 'å–æ¶ˆ']
      }
    }
  },

  // é˜²æŒ«è´¥æœºåˆ¶
  antiFrustration: {
    confirmBeforeLeave: {
      enabled: true,
      triggerConditions: [
        'unsaved-code-changes',
        'incomplete-circuit',
        'unfinished-challenge'
      ],
      
      ui: {
        type: 'modal',
        title: 'âš ï¸ ä½ æœ‰æœªä¿å­˜çš„æ›´æ”¹',
        message: 'å¦‚æœç¦»å¼€ï¼Œä½ çš„ä»£ç ä¼šä¸¢å¤±ã€‚ç¡®å®šè¦ç¦»å¼€å—ï¼Ÿ',
        buttons: [
          { label: 'ç»§ç»­ç¼–è¾‘', action: 'cancel', style: 'primary' },
          { label: 'ä¿å­˜å¹¶ç¦»å¼€', action: 'save-and-leave' },
          { label: 'æ”¾å¼ƒæ›´æ”¹ç¦»å¼€', action: 'leave-without-saving', style: 'danger' }
        ]
      }
    },

    backButtonBehavior: {
      enabled: true,
      intercept: 'browser-back-button',
      flow: `
1. ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨çš„ [<] è¿”å›é”®
2. å¦‚æœæœ‰æœªä¿å­˜çš„æ›´æ”¹ â†’ æ‹¦æˆªï¼Œæ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
3. å¦åˆ™æ­£å¸¸è¿”å›åˆ°æŠ€èƒ½åœ°å›¾
      `
    }
  }
}
```

---

#### FR-011: Loot ç³»ç»Ÿä¸ Sector 04 è¿æ¥ âœ… å•†ä¸šé—­ç¯ç‰ˆ

**æè¿°**: å®Œæˆå…³å¡æ—¶è·å¾—è™šæ‹Ÿç¡¬ä»¶æ¨¡å—ï¼Œç§¯ç´¯åˆ° Sector 04 ç”¨äºå®ç‰©åˆ¶é€ é¡¹ç›®

**æ‰è½ç‰©ä¸åº“å­˜ç³»ç»Ÿ**:
```javascript
const SECTOR_04_LOOT_SYSTEM = {
  name: 'æ‰è½ç‰©ä¸åº“å­˜ç³»ç»Ÿ',
  description: 'å®Œæˆå…³å¡æ—¶è·å¾—è™šæ‹Ÿç¡¬ä»¶æ¨¡å—ï¼Œç§¯ç´¯åˆ° Sector 04',

  // æ¯ä¸ªå…³å¡çš„æ‰è½ç‰©å®šä¹‰
  lessonLootTable: {
    'lesson_gpio_basics': {
      title: 'GPIO åŸºç¡€å…¥é—¨',
      lootDrops: [
        {
          id: 'gpio-control-module',
          name: 'ğŸ”Œ GPIO æ§åˆ¶å•å…ƒ',
          description: 'èƒ½å¤Ÿè¯»å†™é€šç”¨è¾“å…¥è¾“å‡ºä¿¡å·',
          rarity: 'common',
          icon: '/assets/loot/gpio-module.png',
          
          // æ­¤æ¨¡å—ç”¨äº Sector 04 çš„ä»€ä¹ˆé¡¹ç›®
          usedInSector04: {
            projects: ['èµ›åšè¶Šé‡è½¦', 'å®¶åº­è‡ªåŠ¨åŒ–ç³»ç»Ÿ'],
            functionality: 'LED å’Œé©¬è¾¾æ§åˆ¶'
          },
          
          // è·å¾—æ¡ä»¶
          requirements: {
            phase_1_completion: true,
            phase_2_completion: true,
            phase_3_challenge: 'any',
            phase_4_quiz: 'score >= 60'
          }
        },
        
        {
          id: 'timing-coordinator',
          name: 'â±ï¸ æ—¶åºåè°ƒå™¨',
          description: 'ç²¾ç¡®æ§åˆ¶äº‹ä»¶çš„å…ˆåé¡ºåºå’Œå»¶è¿Ÿ',
          rarity: 'uncommon',
          icon: '/assets/loot/timing.png',
          
          requirements: {
            phase_3_challenge: 'completed',
            bonus: 'code_contains_sleep_function'
          }
        },
        
        {
          id: 'persistence-badge',
          name: 'ğŸ… åšæŒå‹‹ç« ',
          description: 'è¡¨ç¤ºä½ ä¸æ€•çŠ¯é”™çš„ç²¾ç¥',
          rarity: 'uncommon',
          icon: '/assets/loot/persistence.png',
          
          requirements: {
            phase_2_or_3_attempts: '>= 3'
          }
        }
      ],
      
      // å®ŒæˆåŠ¨ç”»
      unlockAnimation: {
        trigger: 'phase-4-completion',
        sequence: [
          {
            time: 0,
            action: 'show-completion-modal',
            title: 'ğŸ‰ æ­å–œï¼Œä½ æŒæ¡äº† GPIO åŸºç¡€ï¼'
          },
          {
            time: 1500,
            action: 'spawn-loot-drops',
            animation: 'items-fly-into-inventory',
            sound: 'loot-drop.mp3'
          },
          {
            time: 3000,
            action: 'show-inventory-preview',
            content: 'ä½ çš„åº“å­˜å·²æ›´æ–°ã€‚æŸ¥çœ‹ Sector 04 æŸ¥çœ‹è¿™äº›æ¨¡å—å¦‚ä½•ç”¨äºä½ çš„è¶Šé‡è½¦ã€‚'
          },
          {
            time: 4000,
            action: 'show-next-recommended-skill',
            skill: 'PWM è„‰å†²å®½åº¦è°ƒåˆ¶',
            reason: 'ä¸‹ä¸€ä¸ªå…³å¡ä¼šæ•™ä½ å¦‚ä½•ç”¨ GPIO æ§åˆ¶ LED çš„äº®åº¦ï¼Œè¿™æ˜¯è¶Šé‡è½¦å¤§ç¯çš„å…³é”®ã€‚'
          }
        ]
      }
    }
  },

  // åº“å­˜ç³»ç»Ÿ
  inventory: {
    location: '/inventory',
    ui: {
      layout: 'grid-view',
      groupBy: 'rarity',
      filters: ['all', 'common', 'uncommon', 'rare', 'epic'],
      
      itemCard: {
        displays: [
          'icon',
          'name',
          'rarity-color-border',
          'description',
          'usedIn-badge'
        ],
        
        hover: {
          shows: 'detailed-tooltip',
          tooltip: [
            'è¯¦ç»†æè¿°',
            'ç”¨é€”',
            'å¦‚ä½•è·å¾—',
            'è§£é”ç›¸å…³çš„ä¸‹ä¸€ä¸ªå…³å¡æ¨è'
          ]
        }
      }
    }
  },

  // ä¸ Sector 04 çš„è¿æ¥
  sector04Integration: {
    unlockCondition: 'all-modules-for-project-collected',
    
    projectList: [
      {
        projectId: 'cyber-buggy-v1',
        name: 'èµ›åšè¶Šé‡è½¦ - åŸºç¡€ç‰ˆ',
        requiredModules: [
          'gpio-control-module',
          'motor-driver',
          'power-distribution'
        ],
        
        moduleStatus: {
          'gpio-control-module': 'unlocked',    // ç»¿è‰²å‹¾
          'motor-driver': 'locked',             // ç°åŒ– + éœ€è¦çš„å…³å¡
          'power-distribution': 'locked'
        },
        
        nextStepHint: 'å®Œæˆ PWM å…³å¡åï¼Œä½ å°†è·å¾— [ç”µæœºé©±åŠ¨æ¨¡å—]ã€‚'
      }
    ]
  }
}
```

---

---

## ğŸ¨ ç¬¬äºŒéƒ¨åˆ†ï¼šè®¾è®¡è§„èŒƒ (Design Specification)

### 2.1 é¡µé¢å¸ƒå±€

#### 2.1.1 æ•´ä½“ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¡¶éƒ¨ HUD                                                         â”‚
â”‚ [è¿”å›] [å½“å‰å…³å¡: GPIO åŸºç¡€] [è¿›åº¦: 41%] [XP: 500] [æ—¶é—´: 20min] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      â”‚                                            â”‚
â”‚   å·¦è¾¹æ              â”‚   ä¸»å†…å®¹åŒº                                 â”‚
â”‚                      â”‚                                            â”‚
â”‚  â€¢ Phase Progress    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â€¢ Your Metrics      â”‚  â”‚  Current Phase: ç†è®ºåŸºç¡€               â”‚ â”‚
â”‚  â€¢ Key Moments       â”‚  â”‚                                        â”‚ â”‚
â”‚  â€¢ Help Panel        â”‚  â”‚  [è§†é¢‘æ’­æ”¾å™¨ / IDE / é¢˜ç›®åŒºåŸŸ]         â”‚ â”‚
â”‚                      â”‚  â”‚                                        â”‚ â”‚
â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚                                            â”‚
â”‚                      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                      â”‚  â”‚  æ€§èƒ½æŒ‡æ ‡                               â”‚ â”‚
â”‚                      â”‚  â”‚  å‡†ç¡®åº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%                â”‚ â”‚
â”‚                      â”‚  â”‚  é€Ÿåº¦:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%               â”‚ â”‚
â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åº•éƒ¨ Action Bar                                                  â”‚
â”‚ [â† ä¸Šä¸€ä¸ª] [ç»§ç»­ â†’] [æç¤º] [å¯»æ±‚å¸®åŠ©] [åˆ†äº«æˆå°±]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.2 è‰²å½©ä¸è§†è§‰

#### èµ›åšæœ‹å…‹é…è‰²

```css
/* æ ¸å¿ƒè‰²å½© */
:root {
  --color-phase-theory: #FF6B35;      /* æ©™çº¢ - ç†è®º */
  --color-phase-practical: #00FFC2;   /* è§å…‰é’ - å®è·µ */
  --color-phase-challenge: #FFD700;   /* é‡‘è‰² - æŒ‘æˆ˜ */
  --color-phase-quiz: #9D4EDD;        /* ç´«è‰² - æµ‹éªŒ */
  
  --color-success: #33FF00;            /* ç»ˆç«¯ç»¿ - æˆåŠŸ */
  --color-error: #FF0055;              /* éœ“è™¹çº¢ - é”™è¯¯ */
  --color-warning: #FFB81C;            /* è­¦å‘Šé»„ */
  
  --color-bg-primary: #0A0E27;         /* æ·±é‚ƒç´«é»‘ */
  --color-bg-secondary: #1A1F3A;       /* æ¬¡çº§æ·±è“ */
  
  --color-text-primary: #E0E0E0;       /* æµ…ç°æ–‡å­— */
  --color-text-secondary: #999999;     /* æ·±ç°æ–‡å­— */
}
```

---

### 2.3 åŠ¨ç”»ä¸åé¦ˆ

#### å…³é”®åŠ¨ç”»

```css
/* æˆåŠŸåé¦ˆ */
@keyframes success-burst {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.2);
  }
  100% {
    opacity: 0;
    transform: scale(1.5);
  }
}

/* é”™è¯¯æŠ–åŠ¨ */
@keyframes error-shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
  20%, 40%, 60%, 80% { transform: translateX(5px); }
}

/* è¿›åº¦æ›´æ–° */
@keyframes progress-fill {
  from {
    width: var(--prev-progress);
  }
  to {
    width: var(--new-progress);
  }
}
```

---

## ğŸ› ï¸ ç¬¬ä¸‰éƒ¨åˆ†ï¼šæŠ€æœ¯å®ç°æŒ‡å—

### 3.1 æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Vue 3 + Nuxt 4 + TypeScript
- **ä»£ç ç¼–è¾‘å™¨**: Monaco Editor æˆ– CodeMirror
- **ç¡¬ä»¶æ¨¡æ‹Ÿ**: Wokwi SDK æˆ– TinkerCAD Circuits API
- **å®æ—¶æ‰§è¡Œ**: Docker + WebSocket
- **åŠ¨ç”»åº“**: GSAP + CSS3
- **åˆ†æåº“**: Mixpanel æˆ– Amplitude

### ğŸš¨ æŠ€æœ¯å†²çªé¢„è­¦ä¸è§£å†³æ–¹æ¡ˆ

#### å†²çª #1: ç¦»çº¿æ¨¡å¼ vs Docker æ‰§è¡Œ

**é—®é¢˜æè¿°**: FR-010 å®šä¹‰äº†ç¦»çº¿å·¥ä½œæ¨¡å¼ï¼Œä½† FR-003 ä½¿ç”¨äº‘ç«¯ Docker æ‰§è¡Œä»£ç ã€‚ç½‘ç»œæ–­å¼€æ—¶ç”¨æˆ·æ— æ³•è¿è¡Œä»¿çœŸã€‚

**è§£å†³æ–¹æ¡ˆ**:
```javascript
const OFFLINE_EXECUTION_STRATEGY = {
  // æ–¹æ¡ˆ A: MVP ç‰ˆæœ¬ï¼ˆæ¨èï¼‰
  mvpApproach: {
    behavior: 'graceful-degradation',
    offlineCapabilities: [
      'code-editing',           // âœ… æ”¯æŒ
      'syntax-highlighting',    // âœ… æ”¯æŒ  
      'auto-completion',        // âœ… æ”¯æŒ
      'code-execution',         // âŒ éœ€è¦è”ç½‘
      'hardware-simulation'     // âŒ éœ€è¦è”ç½‘
    ],
    
    ui: {
      networkStatus: {
        online: 'ğŸŸ¢ åœ¨çº¿ - å…¨åŠŸèƒ½å¯ç”¨',
        offline: 'ğŸ”´ ç¦»çº¿ - ä»…æ”¯æŒä»£ç ç¼–è¾‘ï¼Œè¿è¡Œéœ€è”ç½‘'
      },
      
      runButtonBehavior: {
        online: 'enabled',
        offline: {
          disabled: true,
          tooltip: 'éœ€è¦ç½‘ç»œè¿æ¥æ‰èƒ½è¿è¡Œä»£ç å’Œä»¿çœŸ'
        }
      }
    }
  },

  // æ–¹æ¡ˆ B: è¿›é˜¶ç‰ˆæœ¬ï¼ˆv1.5+ï¼‰
  advancedApproach: {
    technology: 'Pyodide (WebAssembly Python)',
    tradeoffs: {
      pros: ['çœŸæ­£çš„ç¦»çº¿æ‰§è¡Œ', 'æ— éœ€æœåŠ¡å™¨'],
      cons: ['å¢åŠ  ~15MB åŒ…ä½“ç§¯', 'æ€§èƒ½ç•¥ä½äºæœåŠ¡ç«¯', 'éƒ¨åˆ†åº“ä¸æ”¯æŒ']
    },
    
    implementation: {
      fallbackChain: [
        '1. å°è¯•äº‘ç«¯ Docker æ‰§è¡Œ',
        '2. å¦‚æœç¦»çº¿ï¼Œé™çº§åˆ° Pyodide',
        '3. å¦‚æœ Pyodide ä¸æ”¯æŒæŸåº“ï¼Œæ˜¾ç¤ºè­¦å‘Š'
      ]
    }
  }
}
```

**MVP å»ºè®®**: é‡‡ç”¨æ–¹æ¡ˆ Aï¼Œåœ¨è¿è¡ŒæŒ‰é’®æ—æ˜¾ç¤ºç½‘ç»œçŠ¶æ€æŒ‡ç¤ºå™¨ã€‚

---

#### å†²çª #2: ä¼´ä¾£æ¨¡å¼å¼€å‘æˆæœ¬

**é—®é¢˜æè¿°**: FR-009 çš„ä¼´ä¾£æ¨¡å¼éœ€è¦å®æ—¶çŠ¶æ€åŒæ­¥ï¼Œå¼€å‘æˆæœ¬æé«˜ï¼ˆç›¸å½“äº Google Docs çº§åˆ«çš„åä½œï¼‰ã€‚

**æˆæœ¬åˆ†æ**:
```javascript
const COMPANION_MODE_COST_ANALYSIS = {
  complexity: 'Google Docs çº§åˆ«çš„å®æ—¶åä½œ',
  
  technicalChallenges: [
    {
      challenge: 'å®æ—¶çŠ¶æ€åŒæ­¥',
      effort: '3-4 å‘¨',
      description: 'PC ç«¯ä»£ç å˜åŒ–éœ€è¦å®æ—¶åŒæ­¥åˆ°æ‰‹æœºç«¯'
    },
    {
      challenge: 'å†²çªè§£å†³',
      effort: '2-3 å‘¨', 
      description: 'å¦‚æœç”¨æˆ·åŒæ—¶åœ¨ PC å’Œæ‰‹æœºä¸Šæ“ä½œ'
    },
    {
      challenge: 'ç½‘ç»œå®¹é”™',
      effort: '1-2 å‘¨',
      description: 'å¤„ç†ç½‘ç»œå»¶è¿Ÿã€æ–­çº¿é‡è¿'
    },
    {
      challenge: 'è·¨è®¾å¤‡è°ƒè¯•',
      effort: '1-2 å‘¨',
      description: 'ä¸åŒè®¾å¤‡ã€æµè§ˆå™¨çš„å…¼å®¹æ€§'
    }
  ],
  
  totalEstimate: '7-11 å‘¨ (1.5-2.5 ä¸ªæœˆ)',
  
  // åˆ†é˜¶æ®µå®æ–½å»ºè®®
  phaseApproach: {
    'v1.0 (MVP)': {
      priority: 'P0',
      features: ['æ–¹æ¡ˆ C: æ¸è¿›å¼é™çº§'],
      effort: '1-2 å‘¨'
    },
    
    'v1.2': {
      priority: 'P1', 
      features: ['æ–¹æ¡ˆ A: å¼ºåˆ¶æ¡Œé¢ç«¯æç¤º'],
      effort: '3-5 å¤©'
    },
    
    'v1.5': {
      priority: 'P2',
      features: ['æ–¹æ¡ˆ B: ä¼´ä¾£æ¨¡å¼ (ç®€åŒ–ç‰ˆ)'],
      effort: '4-6 å‘¨',
      scope: 'ä»…æ”¯æŒå•å‘åŒæ­¥ (PC â†’ æ‰‹æœº)'
    },
    
    'v2.0': {
      priority: 'P3',
      features: ['ä¼´ä¾£æ¨¡å¼ (å®Œæ•´ç‰ˆ)'],
      effort: '7-11 å‘¨',
      scope: 'åŒå‘åŒæ­¥ + å†²çªè§£å†³'
    }
  }
}
```

**MVP å»ºè®®**: v1.0 ä»…å®ç°æ¸è¿›å¼é™çº§ï¼Œå°†ä¼´ä¾£æ¨¡å¼æ¨è¿Ÿåˆ° v1.5+ã€‚

---

### ğŸ¯ æŠ€æœ¯é€‰å‹å»ºè®® (å¼€å‘å›¢é˜Ÿå‚è€ƒ)

#### 1. å¸ƒå±€ç®¡ç† (FR-007) - åˆ†å±æ‹–æ‹½

**æ¨èåº“**: 
- `splitpanes` (Vue 3 ä¸“ç”¨) æˆ– `@vueuse/core` ä¸­çš„ `useDraggable`

**ç†ç”±**: 
- ä¸è¦æ‰‹å†™æ‹–æ‹½é€»è¾‘ï¼Œè¿™äº›åº“å·²ç»å®Œç¾å¤„ç†äº†è§¦æ‘¸äº‹ä»¶æ”¯æŒã€æœ€å°å®½åº¦é™åˆ¶å’Œå“åº”å¼é‡æ’
- splitpanes ä¸“é—¨ä¸ºåˆ†å±åœºæ™¯ä¼˜åŒ–ï¼Œæ”¯æŒåµŒå¥—åˆ†å±å’Œè®°å¿†å¸ƒå±€

```javascript
// æ¨èå®ç°æ–¹å¼
import { Splitpanes, Pane } from 'splitpanes'

// è€Œä¸æ˜¯æ‰‹å†™å¤æ‚çš„ mouse/touch äº‹ä»¶å¤„ç†
```

---

#### 2. çŠ¶æ€æŒä¹…åŒ– (FR-010) - IndexedDB æ“ä½œ

**æ¨èåº“**: 
- `Dexie.js` æˆ– `idb-keyval`

**ç†ç”±**: 
- åŸç”Ÿ IndexedDB API éå¸¸ç¹çï¼ŒDexie.js æä¾›äº†æ›´å‹å¥½çš„æŸ¥è¯¢è¯­æ³•å’Œäº‹åŠ¡ç®¡ç†
- èƒ½æ˜¾è‘—é™ä½ `snapshotManager.ts` çš„ä»£ç å¤æ‚åº¦

```javascript
// æ¨èå®ç°æ–¹å¼
import Dexie from 'dexie'

class SnapshotDB extends Dexie {
  snapshots: Dexie.Table<Snapshot, string>
  
  constructor() {
    super('LessonSnapshots')
    this.version(1).stores({
      snapshots: 'id, timestamp, lessonId, code, circuitState'
    })
  }
}

// è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨åŸç”Ÿ IndexedDB çš„å¤æ‚äº‹åŠ¡è¯­æ³•
```

---

#### 3. é”™è¯¯ç¿»è¯‘ (FR-008) - æ­£åˆ™ç»´æŠ¤

**æ¨èæ¶æ„**: 
- å°† `error-patterns.json` æ”¾åœ¨æœåŠ¡ç«¯æˆ– CMS ä¸­ç»´æŠ¤ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç åœ¨å‰ç«¯

**ç†ç”±**: 
- Python çš„æŠ¥é”™ä¿¡æ¯å¯èƒ½ä¼šéšç‰ˆæœ¬æ›´æ–°ï¼Œæˆ–è€…ä½ ä»¬ä¼šå‘ç°æ–°çš„å¸¸è§é”™è¯¯
- åŠ¨æ€æ›´æ–°æ­£åˆ™å¯ä»¥è®©ä½ ä»¬åœ¨ä¸å‘ç‰ˆçš„æƒ…å†µä¸‹ä¼˜åŒ–é”™è¯¯æç¤º

```javascript
// æ¨èå®ç°æ–¹å¼
const errorPatterns = await fetch('/api/error-patterns').then(r => r.json())

// è€Œä¸æ˜¯
import errorPatterns from '@/assets/data/error-patterns.json'
```

---

#### 4. æ‰è½ç‰©åŠ¨ç”» (FR-011) - "çˆ½æ„Ÿ"è®¾è®¡

**æ¨èåŠ¨ç”»åºåˆ—**: 
å‚è€ƒ"å¼€ç®± (Loot Box)"çš„å¿ƒç†å­¦è®¾è®¡

```javascript
const LOOT_DROP_ANIMATION = {
  phase1_anticipation: {
    duration: 1000,
    effect: 'è§£å¯†/åˆæˆåŠ¨ç”»',
    purpose: 'å»ºç«‹æœŸå¾…æ„Ÿ'
  },
  
  phase2_reveal: {
    duration: 800,
    effect: 'ç‰©å“å›¾æ ‡"çˆ†å‡º"å¼¹æ€§åŠ¨ç”»',
    easing: 'back.out',  // å…³é”®ï¼šå¼¹æ€§ç¼“åŠ¨
    purpose: 'æ»¡è¶³æ„Ÿçˆ†å‘'
  },
  
  phase3_collect: {
    duration: 600,
    effect: 'å›¾æ ‡é£å‘å³ä¸Šè§’èƒŒåŒ…',
    easing: 'power2.out',
    purpose: 'æ”¶é›†ç¡®è®¤æ„Ÿ'
  }
}
```

**GSAP å®ç°ç¤ºä¾‹**:
```javascript
// æ‰è½å‰ï¼šæœŸå¾…æ„Ÿ
gsap.to('.loot-container', { 
  scale: 1.1, 
  rotation: 5, 
  duration: 0.5, 
  yoyo: true, 
  repeat: 1 
})

// æ‰è½æ—¶ï¼šçˆ†å‡ºæ„Ÿ
gsap.fromTo('.loot-item', 
  { scale: 0, rotation: -180 },
  { scale: 1, rotation: 0, duration: 0.8, ease: 'back.out(1.7)' }
)

// æ‹¾å–åï¼šé£å‘èƒŒåŒ…
gsap.to('.loot-item', {
  x: 'calc(100vw - 80px)',
  y: '-60px',
  scale: 0.3,
  duration: 0.6,
  ease: 'power2.out'
})
```

### 3.2 æ ¸å¿ƒæ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ lesson/
â”‚       â””â”€â”€ [lessonId].vue        # å…³å¡é¡µé¢ä¸»å®¹å™¨
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ LessonScene.vue           # å…³å¡åœºæ™¯ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ PhaseTheory.vue           # ç†è®ºé˜¶æ®µç»„ä»¶
â”‚   â”œâ”€â”€ PhasePractical.vue        # å®è·µé˜¶æ®µç»„ä»¶
â”‚   â”œâ”€â”€ PhaseChallenge.vue        # æŒ‘æˆ˜é˜¶æ®µç»„ä»¶
â”‚   â”œâ”€â”€ PhaseQuiz.vue             # æµ‹éªŒé˜¶æ®µç»„ä»¶
â”‚   â”œâ”€â”€ CodeEditor.vue            # IDE ä»£ç ç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ HardwareSimulator.vue      # è™šæ‹Ÿç¡¬ä»¶æ¨¡æ‹Ÿå™¨
â”‚   â”œâ”€â”€ ProgressBar.vue           # è¿›åº¦æ¡
â”‚   â”œâ”€â”€ PerformanceMetrics.vue    # æ€§èƒ½æŒ‡æ ‡æ˜¾ç¤º
â”‚   â”œâ”€â”€ AchievementNotification.vue # æˆå°±é€šçŸ¥
â”‚   â”œâ”€â”€ LeftSidebar.vue           # å·¦ä¾§æ 
â”‚   â”œâ”€â”€ SmartSplitPanes.vue       # æ™ºèƒ½åˆ†å±ç³»ç»Ÿ (FR-007)
â”‚   â”œâ”€â”€ ErrorTranslator.vue       # é”™è¯¯ç¿»è¯‘å™¨ (FR-008)
â”‚   â”œâ”€â”€ StepDebugger.vue          # æ­¥è¿›è°ƒè¯•å™¨ (FR-008)
â”‚   â”œâ”€â”€ MobileAdapter.vue         # ç§»åŠ¨ç«¯é€‚é…å™¨ (FR-009)
â”‚   â”œâ”€â”€ CompanionMode.vue         # ä¼´ä¾£æ¨¡å¼ (FR-009)
â”‚   â”œâ”€â”€ AutoSnapshot.vue          # è‡ªåŠ¨å¿«ç…§ (FR-010)
â”‚   â”œâ”€â”€ LootSystem.vue            # æ‰è½ç‰©ç³»ç»Ÿ (FR-011)
â”‚   â””â”€â”€ InventoryPanel.vue        # åº“å­˜é¢æ¿ (FR-011)
â”œâ”€â”€ composables/
â”‚   â”œâ”€â”€ useLesson.ts              # å…³å¡é€»è¾‘
â”‚   â”œâ”€â”€ useCodeExecution.ts       # ä»£ç æ‰§è¡Œé€»è¾‘
â”‚   â”œâ”€â”€ useProgressTracking.ts    # è¿›åº¦è¿½è¸ª
â”‚   â”œâ”€â”€ useAchievementSystem.ts   # æˆå°±ç³»ç»Ÿ
â”‚   â”œâ”€â”€ useLearningAnalytics.ts   # å­¦ä¹ åˆ†æ
â”‚   â”œâ”€â”€ useLayoutManager.ts       # å¸ƒå±€ç®¡ç† (FR-007)
â”‚   â”œâ”€â”€ useErrorTranslation.ts    # é”™è¯¯ç¿»è¯‘ (FR-008)
â”‚   â”œâ”€â”€ useStepDebugger.ts        # æ­¥è¿›è°ƒè¯• (FR-008)
â”‚   â”œâ”€â”€ useMobileDetection.ts     # ç§»åŠ¨ç«¯æ£€æµ‹ (FR-009)
â”‚   â”œâ”€â”€ useAutoSnapshot.ts        # è‡ªåŠ¨å¿«ç…§ (FR-010)
â”‚   â””â”€â”€ useLootSystem.ts          # æ‰è½ç‰©ç³»ç»Ÿ (FR-011)
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ videos/
â”‚   â”‚   â””â”€â”€ gpio-basics.mp4
â”‚   â”œâ”€â”€ audio/
â”‚   â”‚   â”œâ”€â”€ success_chime.mp3
â”‚   â”‚   â”œâ”€â”€ error_buzz.mp3
â”‚   â”‚   â””â”€â”€ loot-drop.mp3         # æ‰è½ç‰©éŸ³æ•ˆ (FR-011)
â”‚   â”œâ”€â”€ loot/                     # æ‰è½ç‰©å›¾æ ‡ (FR-011)
â”‚   â”‚   â”œâ”€â”€ gpio-module.png
â”‚   â”‚   â”œâ”€â”€ timing.png
â”‚   â”‚   â””â”€â”€ persistence.png
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ lessons.json          # å…³å¡æ•°æ®
â”‚       â”œâ”€â”€ error-patterns.json   # é”™è¯¯æ¨¡å¼ (FR-008)
â”‚       â””â”€â”€ loot-tables.json      # æ‰è½ç‰©è¡¨ (FR-011)
â””â”€â”€ utils/
    â”œâ”€â”€ codeValidator.ts          # ä»£ç éªŒè¯
    â”œâ”€â”€ testRunner.ts             # æµ‹è¯•è¿è¡Œå™¨
    â”œâ”€â”€ analyticsTracker.ts       # åˆ†æè¿½è¸ª
    â”œâ”€â”€ errorPatternMatcher.ts    # é”™è¯¯æ¨¡å¼åŒ¹é… (FR-008)
    â”œâ”€â”€ deviceCapabilityDetector.ts # è®¾å¤‡èƒ½åŠ›æ£€æµ‹ (FR-009)
    â”œâ”€â”€ snapshotManager.ts        # å¿«ç…§ç®¡ç† (FR-010)
    â””â”€â”€ lootCalculator.ts         # æ‰è½ç‰©è®¡ç®— (FR-011)
```

---

## âœ… è´¨æ£€æ¸…å•

### åŠŸèƒ½éªŒè¯
- [ ] å››ä¸ªé˜¶æ®µé¡ºåºåŠ è½½ï¼ŒçŠ¶æ€æ­£ç¡®åˆ‡æ¢
- [ ] ä»£ç ç¼–è¾‘å™¨èƒ½æ‰§è¡Œä»£ç å¹¶è¿”å›ç»“æœ
- [ ] è™šæ‹Ÿç¡¬ä»¶æ¨¡æ‹Ÿå™¨æ­£ç¡®åæ˜ ä»£ç æ‰§è¡Œæ•ˆæœ
- [ ] è¿›åº¦æ¡å®æ—¶æ›´æ–°
- [ ] æˆå°±ç³»ç»Ÿæ­£ç¡®è¯†åˆ«å¤šç»´åº¦æˆå°±
- [ ] ç¤¾äº¤åŠŸèƒ½æ­£å¸¸ï¼ˆåˆ†äº«ã€å¯»æ±‚å¸®åŠ©ï¼‰

### æ–°å¢åŠŸèƒ½éªŒè¯ (v1.1)
- [ ] **å¸ƒå±€ç®¡ç† (FR-007)**: åˆ†å±æ‹–æ‹½ã€Zen Modeã€å¸ƒå±€è®°å¿†
- [ ] **æ™ºèƒ½è°ƒè¯• (FR-008)**: é”™è¯¯ç¿»è¯‘ã€æ­¥è¿›æ‰§è¡Œã€æ—¶åºå¯è§†åŒ–
- [ ] **ç§»åŠ¨ç«¯é€‚é… (FR-009)**: ä¸‰ç§æ–¹æ¡ˆæ­£å¸¸å·¥ä½œï¼Œä¼´ä¾£æ¨¡å¼é…å¯¹æˆåŠŸ
- [ ] **çŠ¶æ€æŒä¹…åŒ– (FR-010)**: è‡ªåŠ¨å¿«ç…§ã€ç‰ˆæœ¬å†å²ã€ç¦»çº¿å·¥ä½œ
- [ ] **Loot ç³»ç»Ÿ (FR-011)**: æ‰è½ç‰©åŠ¨ç”»ã€åº“å­˜ç®¡ç†ã€Sector 04 è¿æ¥

### æ€§èƒ½éªŒè¯
- [ ] é¡µé¢åŠ è½½ < 3.0s
- [ ] ä»£ç æ‰§è¡Œåé¦ˆ < 500ms
- [ ] IDE è‡ªåŠ¨å®Œæˆ < 200ms
- [ ] åŠ¨ç”»å¸§ç‡ 60fps
- [ ] **è‡ªåŠ¨å¿«ç…§å»¶è¿Ÿ < 10ms (IndexedDB)**
- [ ] **é”™è¯¯ç¿»è¯‘å“åº” < 200ms**
- [ ] **ä¼´ä¾£æ¨¡å¼åŒæ­¥å»¶è¿Ÿ < 100ms**

### ç”¨æˆ·ä½“éªŒéªŒè¯
- [ ] é”™è¯¯æ¶ˆæ¯æ¸…æ™°æœ‰ç”¨
- [ ] è¿›åº¦åé¦ˆå³æ—¶ä¸”æ»¡è¶³æ„Ÿåè¶³
- [ ] å…³å¡éš¾åº¦å¾ªåºæ¸è¿›
- [ ] æ²¡æœ‰ä¿¡æ¯è¿‡è½½æ„Ÿ
- [ ] **ç§»åŠ¨ç«¯ä½“éªŒä¸å—æŸ**
- [ ] **ä»£ç ä¸¢å¤±é£é™©ä¸ºé›¶**
- [ ] **é”™è¯¯æç¤ºäººæ€§åŒ–**

### æŠ€æœ¯é£é™©éªŒè¯ (v1.1 æ–°å¢)
- [ ] **ç¦»çº¿æ¨¡å¼è¾¹ç•Œæ¸…æ™°**: ç”¨æˆ·æ˜ç¡®çŸ¥é“å“ªäº›åŠŸèƒ½ç¦»çº¿å¯ç”¨
- [ ] **ç½‘ç»œçŠ¶æ€æŒ‡ç¤ºå™¨**: å®æ—¶æ˜¾ç¤ºåœ¨çº¿/ç¦»çº¿çŠ¶æ€
- [ ] **ä¼´ä¾£æ¨¡å¼èŒƒå›´æ§åˆ¶**: v1.0 ä»…å®ç°æ¸è¿›å¼é™çº§
- [ ] **Docker æ‰§è¡Œå®¹é”™**: ç½‘ç»œå¼‚å¸¸æ—¶æœ‰æ˜ç¡®é”™è¯¯æç¤º
- [ ] **æˆæœ¬æ§åˆ¶**: å¤æ‚åŠŸèƒ½æŒ‰ä¼˜å…ˆçº§åˆ†é˜¶æ®µå®æ–½

### æŠ€æœ¯é€‰å‹éªŒè¯ (å¼€å‘å›¢é˜Ÿ)
- [ ] **åˆ†å±æ‹–æ‹½**: ä½¿ç”¨ splitpanes æˆ– @vueuse/coreï¼Œé¿å…æ‰‹å†™æ‹–æ‹½é€»è¾‘
- [ ] **IndexedDB æ“ä½œ**: ä½¿ç”¨ Dexie.js æˆ– idb-keyvalï¼Œé¿å…åŸç”Ÿ API å¤æ‚æ€§
- [ ] **é”™è¯¯æ­£åˆ™ç»´æŠ¤**: æœåŠ¡ç«¯åŠ¨æ€é…ç½®ï¼Œæ”¯æŒä¸å‘ç‰ˆæ›´æ–°
- [ ] **æ‰è½ç‰©åŠ¨ç”»**: ä¸‰é˜¶æ®µè®¾è®¡ï¼ˆæœŸå¾…â†’çˆ†å‡ºâ†’æ”¶é›†ï¼‰ï¼Œä½¿ç”¨ GSAP back.out ç¼“åŠ¨

### è·¨è®¾å¤‡éªŒè¯
- [ ] **æ¡Œé¢ç«¯**: å…¨åŠŸèƒ½æ­£å¸¸
- [ ] **å¹³æ¿ç«¯**: å¸ƒå±€è‡ªé€‚åº”
- [ ] **æ‰‹æœºç«–å±**: æ¸è¿›å¼é™çº§æˆ–å¼ºåˆ¶æ¡Œé¢ç«¯æç¤º
- [ ] **æ‰‹æœºæ¨ªå±**: ä¾§è¾¹æ æŠ˜å æ­£å¸¸
- [ ] **ä¼´ä¾£æ¨¡å¼**: âš ï¸ v1.0 æš‚ä¸å®æ–½ï¼Œä¼˜å…ˆçº§ P2

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.1 (å¢å¼ºç‰ˆ)  
**ç¼–åˆ¶æ—¶é—´**: 2024-12-20  
**å®¡æ ¸çŠ¶æ€**: âœ… ç”Ÿäº§çº§è§„èŒƒ (å«æŠ€æœ¯é£é™©è¯„ä¼°)  
**äº¤ä»˜å¯¹è±¡**: é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ

## ğŸ“‹ v1.1 æ›´æ–°æ‘˜è¦

æœ¬ç‰ˆæœ¬ä¿®å¤äº† v1.0 ä¸­çš„ 5 ä¸ªå…³é”®é—æ¼ï¼Œæ–°å¢äº† 5 ä¸ªåŠŸèƒ½éœ€æ±‚ (FR-007 åˆ° FR-011)ï¼š

1. **FR-007 å¸ƒå±€ç®¡ç†**: æ™ºèƒ½åˆ†å±ã€Zen Modeã€ç”¨æˆ·åå¥½è®°å¿†
2. **FR-008 æ™ºèƒ½è°ƒè¯•**: é”™è¯¯äººæ€§åŒ–ç¿»è¯‘ã€æ­¥è¿›æ‰§è¡Œã€æ—¶åºå¯è§†åŒ–  
3. **FR-009 ç§»åŠ¨ç«¯é€‚é…**: ä¸‰ç§æ–¹æ¡ˆï¼ˆå¼ºåˆ¶æ¡Œé¢/ä¼´ä¾£æ¨¡å¼/æ¸è¿›é™çº§ï¼‰
4. **FR-010 çŠ¶æ€æŒä¹…åŒ–**: è‡ªåŠ¨å¿«ç…§ã€å¤šå±‚å¤‡ä»½ã€é˜²æŒ«è´¥æœºåˆ¶
5. **FR-011 Loot ç³»ç»Ÿ**: æ‰è½ç‰©ã€åº“å­˜ã€ä¸ Sector 04 è¿æ¥

## âš ï¸ æŠ€æœ¯é£é™©ä¸æˆæœ¬æ§åˆ¶

### å…³é”®æŠ€æœ¯å†²çª
1. **ç¦»çº¿æ¨¡å¼ vs Docker æ‰§è¡Œ**: MVP ç‰ˆæœ¬é‡‡ç”¨ä¼˜é›…é™çº§ï¼Œç¦»çº¿æ—¶ç¦ç”¨ä»£ç è¿è¡Œ
2. **ä¼´ä¾£æ¨¡å¼å¼€å‘æˆæœ¬**: ç›¸å½“äº Google Docs çº§åˆ«åä½œï¼Œæ¨è¿Ÿåˆ° v1.5+ å®æ–½

### æŠ€æœ¯é€‰å‹å»ºè®®
1. **åˆ†å±æ‹–æ‹½**: ä½¿ç”¨ splitpanesï¼Œé¿å…æ‰‹å†™å¤æ‚é€»è¾‘
2. **IndexedDB**: ä½¿ç”¨ Dexie.jsï¼Œç®€åŒ–æ•°æ®åº“æ“ä½œ
3. **é”™è¯¯æ­£åˆ™**: æœåŠ¡ç«¯ç»´æŠ¤ï¼Œæ”¯æŒåŠ¨æ€æ›´æ–°
4. **æ‰è½ç‰©åŠ¨ç”»**: ä¸‰é˜¶æ®µå¿ƒç†å­¦è®¾è®¡ï¼ŒGSAP back.out ç¼“åŠ¨

### åˆ†é˜¶æ®µå®æ–½å»ºè®®
- **v1.0 (MVP)**: FR-007, FR-008, FR-010, FR-011 + FR-009 æ¸è¿›å¼é™çº§
- **v1.2**: FR-009 å¼ºåˆ¶æ¡Œé¢ç«¯æç¤º
- **v1.5**: FR-009 ä¼´ä¾£æ¨¡å¼ç®€åŒ–ç‰ˆ (å•å‘åŒæ­¥)
- **v2.0**: ä¼´ä¾£æ¨¡å¼å®Œæ•´ç‰ˆ (åŒå‘åŒæ­¥)

**ä¼˜å…ˆçº§å»ºè®®**: P0 (é”™è¯¯äººæ€§åŒ–ã€çŠ¶æ€æŒä¹…åŒ–ã€å¸ƒå±€ç®¡ç†) â†’ P1 (ç§»åŠ¨ç«¯é€‚é…) â†’ P2 (Loot ç³»ç»Ÿ)

å¯ä¸ã€ŠæŠ€èƒ½åœ°å›¾è®¾è®¡æ–‡æ¡£ v1.1ã€‹é…åˆä½¿ç”¨ï¼Œå®Œæ•´è¦†ç›–ç”¨æˆ·ä»æµè§ˆâ†’å­¦ä¹ â†’æˆå°±çš„å®Œæ•´é—­ç¯ã€‚

