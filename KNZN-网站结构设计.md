# 🎮 KNZN 硬件学习网站 - 完整页面结构与功能设计

## 📑 目录
1. [网站核心页面清单](#网站核心页面清单)
2. [详细功能说明](#详细功能说明)
3. [网站设计指南](#网站设计指南)
4. [用户流程图](#用户流程图)
5. [移动端适配方案](#移动端适配方案)

---

## 网站核心页面清单

### 1️⃣ 首页 (The Access Terminal)
**路由**: `/` 或 `/home`
**用户状态**: 已登录 / 未登录

#### 页面功能
- **核心交互**: 闸刀开关拖拽机制
  - 全屏黑暗模式 (#050505)
  - 居中显示 240px×360px 金属质感闸刀
  - 拖拽 80px 以上触发通电仪式
  - 物理回弹动画 (未完成时)
  
- **通电仪式流程** (时间轴)
  ```
  0ms:      完成拖拽
  0-200ms:  黑屏死寂
  200ms:    电流嗡鸣声渐起
  400ms:    KNZN Logo 点亮 + Glitch 效果 (0.5s)
  800ms:    主菜单按钮逐个发光 (间隔 100ms)
  1200ms:   背景氛围光渐入
  1500ms:   显示 CTA「建立神经连接」
  ```

- **页面分区**
  - **上部**: Logo 轮廓 (待通电)
  - **中部**: 闸刀开关 (可交互)
  - **下部**: 闪烁文案「> SYSTEM_OFFLINE. DRAG TO INITIALIZE.」
  - **底部**: 社交证明「已有 1024 位工程师加入」

#### 无需登录体验
- Guest Mode: 直接进入 Sector 01-1 微缩版 (限时 10 分钟)
- 通关后弹窗引导注册，提示「保存进度」

---

### 2️⃣ 技能地图 (The Skill Map)
**路由**: `/map` 或 `/dashboard`
**用户状态**: 登录必需

#### 页面布局
```
┌─────────────────────────────────────────┐
│  HUD 顶栏: KNZN_OS | Latency | 登出    │
├──────────────────────────────────────────┤
│                                          │
│  巨大 PCB 走线图背景                     │
│  ⚫ Sector 01 (已完成) ──(金色铜箔)──    │
│  ⚫ Sector 02 (进行中) ~~(虚线迷雾)~~    │
│  ⭕ Sector 03 (锁定)                    │
│  🔒 Sector 04 (锁定)                    │
│                                          │
│  右下角: 用户状态面板 (可展开)           │
│  - 等级: Level 5 Wireman                 │
│  - XP: ████░░░░░░ 65%                   │
│  - 蓝图碎片: 2/4                         │
│  - 虚拟金币: 1250 Credits               │
│                                          │
└──────────────────────────────────────────┘
```

#### 关键功能
1. **Sector 节点交互**
   - 悬停: 节点放大 1.1x，显示 Tooltip
   - 点击已解锁: 进入关卡选择界面
   - 点击锁定: 显示解锁条件提示

2. **Sector 分支导航** (可折叠)
   ```
   Sector 01: 逻辑核心 [免费体验]
   ├─ Lvl 1-1: 闭合回路 ✓ (3★)
   ├─ Lvl 1-2: 刹车系统 ✓ (2★)
   ├─ Lvl 1-3: 安全协议 ✓ (1★)
   ├─ Lvl 1-4: 紧急避险 ○ (未开始)
   └─ Lvl 1-5 [BOSS]: 密码锁 🔒 (需订阅)
   
   Sector 02: 动力与控制 [付费区]
   └─ 需完成 Sector 01 解锁...
   ```

3. **右侧快捷栏**
   - 🗺️ Map (当前页)
   - 🎒 Inventory (背包)
   - ⚔️ Arena (困难模式-二期)
   - 👤 Profile (档案)
   - 💎 Upgrade (升级订阅)

---

### 3️⃣ 关卡场景 (The Workbench)
**路由**: `/level/:sectorId/:levelId`
**用户状态**: 登录必需

#### 三栏式布局

**左栏 (240px) - 任务与剧情**
```
┌─────────────────────┐
│ NPC「Bit」对话框    │
│ (动态文案，支持MD)  │
│                     │
│ "指挥官，飞船的门   │
│ 禁系统坏了..."      │
│                     │
├─────────────────────┤
│ 目标清单 (Checklist)│
│ ☐ 放置一个 AND 门  │
│ ☐ 连接传感器 A    │
│ ☑ 输出端连接      │
│                     │
├─────────────────────┤
│ [提示] [重置] [退出]│
└─────────────────────┘
```

**中栏 (Flex 1) - 仿真画布**
```
仿真区域特性:
- 网格背景 (20px 网格间距)
- 可拖拽元件
- 自动吸附对齐
- 自动寻路布线 (90° 转角)
- 实时电平可视化
  ├─ 高电平(1): 荧光青 + 流动粒子
  ├─ 低电平(0): 暗灰 + 呼吸动画
  └─ 悬空(Z): 半透明虚线
```

**右栏 (280px) - 工具箱与 AI 助手**
```
┌──────────────────────┐
│ 📦 元件工具箱        │
│ [AND门] [OR门] [NOT] │
│ [LED] [电池] [开关]  │
│ (仅显示当前关卡允许) │
│                      │
├──────────────────────┤
│ 🤖 AI 助教悬浮球    │
│ ┌────────────────┐  │
│ │ 给我一点提示 ▼ │  │
│ └────────────────┘  │
│ • 这是什么元件?      │
│ • 我卡住了          │
│ • 看看原理图        │
│                      │
├──────────────────────┤
│ [运行仿真]           │
│ [提交答案]           │
│ [重置电路]           │
└──────────────────────┘
```

#### 交互细节
1. **拖拽元件**
   - 吸附到 20px 网格 (自动)
   - 音效反馈: 📍 component_place.wav
   - 触觉反馈: 10ms 振动 (如支持)

2. **连线操作**
   - 点击源引脚 → 点击目标引脚 → 自动寻路
   - 支持拖拽线段微调
   - 错误检测 (Output→Output) → 红线抖动 + 禁止

3. **仿真运行**
   - 点击「运行仿真」→ 1s 内显示电平变化
   - 成功: 屏幕震动 + 「SUCCESS」金字
   - 失败: AI 自动提示

---

### 4️⃣ 用户中心 (Character Sheet)
**路由**: `/profile` 或 `/user/:userId`

#### 子页面结构
```
Profile Hub:
├─ 👤 角色面板 (默认页)
├─ 🏆 成就与徽章
├─ ⚙️ 设置选项
└─ 💳 订阅管理
```

#### 角色面板详情
```
┌─────────────────────────────────┐
│  [头像] Level 5 Wireman         │
│  初级布线工                      │
├─────────────────────────────────┤
│                                 │
│  战力雷达图 (五维):             │
│  逻辑能力      ━━━━━━━ 78%      │
│  布线美学      ━━━━━━━━━ 92%    │
│  调试速度      ━━━━━ 68%        │
│  知识广度      ━━━━━━ 75%       │
│  连胜纪录      ━━━━━━━ 85%      │
│                                 │
├─────────────────────────────────┤
│  XP: ██████░░░░ 1250 / 2000     │
│  Next Level: 750 XP 剩余        │
│                                 │
│  虚拟金币: 💰 1250 Credits      │
│  蓝图碎片: 🧩 2/4 (50%)         │
│                                 │
├─────────────────────────────────┤
│  学习热力图 (最近 12 周)        │
│  ▓ ▓ ░ ▓ ░ ▓ ░ ░ ░ ▓ ▓ ▓      │
│  连续 5 天挑战! 🔥              │
│                                 │
└─────────────────────────────────┘
```

---

### 5️⃣ 蓝图库 (Blueprint Arsenal)
**路由**: `/arsenal` 或 `/blueprints`

#### 展示逻辑
1. **全息投影 3D 展示**
   - 赛博越野车 3D 模型 (可旋转)
   - 已解锁部分高亮 + 发光
   - 进度条: 「当前实物化 50% / 4 零件」

2. **已获得蓝图卡片列表**
   ```
   ┌──────────────────────┐
   │ 🧊 Cyber_Rover_     │
   │    Chassis.stl       │
   │ [下载] [打开] [分享]  │
   └──────────────────────┘
   ```

3. **一键导出功能**
   - [DOWNLOAD ALL BLUEPRINTS] 按钮
   - 生成 .zip 包含:
     - Gerber Files (PCB 打板)
     - Smart BOM (元件清单)
     - STL Files (3D 打印)
     - Assembly Guide (组装说明)

4. **外部链接快捷**
   - 「一键上传嘉立创」→ 自动打板
   - 「购买物料清单」→ 淘宝链接

---

### 6️⃣ 社区中心 (Assembly Hall)
**路由**: `/community` 或`/social`

#### 功能模块
1. **用户作品展示**
   - 上传实物照片/视频
   - 标签: #我的赛博越野车 #实物落地
   - 核实后获得「Master Builder」徽章

2. **排行榜 (Leaderboard)**
   - 🏆 周排行 (按 XP)
   - 🏅 总排行
   - ⭐ 最高星数
   - 🔥 连胜纪录

3. **论坛/讨论**
   - 关卡讨论区
   - 元件教学库
   - 用户提问
   - AI 助教回答

---

### 7️⃣ 认证相关页面

#### 注册/登录 (Authentication)
**路由**: `/auth/login` 或 `/auth/signup`

```
页面流:
┌─ 未登录访问受保护页面
│  ↓
├─ 跳转到 /auth/login
│  ↓
├─ 显示登录表单
│  ├─ 邮箱/用户名
│  ├─ 密码
│  ├─ [登录]
│  └─ 「没有账户? 立即注册」
│  ↓
└─ 成功 → 跳转到原页面或 /map
```

#### 用户设置 (Settings)
**路由**: `/settings`

```
- 账户设置
  ├─ 头像上传
  ├─ 用户名修改
  ├─ 邮箱绑定
  └─ 密码修改
  
- 偏好设置
  ├─ 音效开关
  ├─ 背景音乐音量
  ├─ 语言选择 (中文/English)
  └─ 暗黑模式 (默认开启)
  
- 订阅管理
  ├─ 当前套餐: Pro Card ($9.9/月)
  ├─ 下次扣费: 2024-01-15
  ├─ [升级套餐] [取消订阅]
  └─ 发票历史
  
- 数据与隐私
  ├─ 下载我的数据
  ├─ 删除账户
  └─ 隐私政策 & 服务条款
```

---

## 详细功能说明

### A. 电路仿真功能 (Circuit Simulator)
**位置**: 关卡场景 - 中央工作台
**核心算法**: 修正节点法 (Modified Nodal Analysis)

#### 支持元件库
```
基础元件:
├─ 电源 (VOLTAGE_SOURCE)
├─ 电阻 (RESISTOR)
├─ 电容 (CAPACITOR) - 二期
├─ 电感 (INDUCTOR) - 二期
└─ 运放 (OPAMP) - 三期

逻辑元件:
├─ AND 门
├─ OR 门
├─ NOT 门
├─ NAND 门
└─ NOR 门

输入/输出:
├─ 开关 (SWITCH)
├─ 按钮 (BUTTON)
├─ LED (指示灯)
└─ 蜂鸣器 (BUZZER)
```

#### 仿真引擎特性
- **实时更新**: 60fps 电平刷新
- **错误检测**: 短路、悬空引脚、功率过载
- **时间戳**: 记录每个操作的时间顺序
- **回放**: 可重放仿真过程 (调试用)

---

### B. AI 助教系统 (AI Tutor)
**位置**: 关卡场景 - 右栏悬浮球
**技术**: OpenAI GPT-4 + RAG 检索

#### 功能列表
1. **智能提示**
   - 3 次失败后主动提示
   - 分级提示 (小提示 → 中提示 → 详细步骤)
   - 自适应难度

2. **原理解释**
   - 「这个 AND 门怎么工作?」
   - 真值表动画展示
   - 实际应用案例

3. **代码审查**
   - 检测逻辑错误
   - 性能建议
   - 最佳实践提示

4. **24/7 答疑**
   - 支持中英文
   - 可追问上下文
   - 回答保存历史

---

### C. 游戏化激励系统 (Gamification)

#### 星级评分 (3-Star System)
```
Lvl 1-1 完成标准:
⭐⭐⭐ (3星): 一次成功，无错误
⭐⭐☆ (2星): 一次成功，<2次错误
⭐☆☆ (1星): 最终成功，但多次失败
☆☆☆ (0星): 未完成或超时
```

#### XP 获得机制
```
XP 计算公式:
基础 XP = 100
星级加成 = 星数 × 50
速度加成 = max(0, 200 - 用时秒数) / 2
总 XP = 基础 + 星级 + 速度
```

#### 等级与徽章
```
Lv.1 - Rookie (新手)        0-500 XP
Lv.2 - Apprentice (学徒)    500-1500 XP
Lv.3 - Technician (技师)    1500-3500 XP
Lv.4 - Engineer (工程师)    3500-7000 XP
Lv.5 - Wireman (布线工)     7000-12000 XP
Lv.6 - Master (大师)        12000+ XP

特殊徽章:
🔥 Speedrun Master (速度之王) - 任何关卡 <10s
⚡ Circuit Wizard (电路巫师) - 完成所有 Sector 01
🏆 Sector Boss (难关克星) - 完成所有 Boss 关
```

---

### D. 支付与订阅系统 (Payment)

#### 定价模型
```
免费版 (Free):
- Sector 01 完全访问 (5 关卡)
- Sector 02 前 2 关
- AI 助教 5 次/天

Pro Card ($9.9/月):
- 所有关卡解锁
- AI 助教无限制
- 蓝图下载权限
- 优先客服支持
- 去广告

Enterprise (联系销售):
- 团队管理 (10+ 用户)
- 自定义关卡
- 数据分析仪表板
```

#### 支付集成
- Stripe (国际)
- 微信支付 (国内)
- 支付宝 (国内)
- Lemon Squeezy (跨境)

---

## 网站设计指南

### 1. 色彩系统 (Color System)

#### 原始色值 (Primitive Colors)
```css
深邃黑: #050505 (背景主色)
深蓝灰: #0f172a (次要背景)
深灰: #1a1a1a (卡片背景)

荧光青: #00FFC2 (主色调 - 逻辑1/高电平)
荧光绿: #33FF00 (终端绿 - 代码/日志)
霓虹红: #FF0055 (警告/高难度)
```

#### 语义色彩 (Semantic Colors)
```
成功: #00FFC2 (荧光青)
错误: #FF0055 (霓虹红)
警告: #FFB800 (琥珀)
信息: #00A0FF (冷蓝)
正常: #888888 (灰色)
```

#### 动态色彩映射
```
电平可视化:
- 高电平 (1): 荧光青 #00FFC2 + Bloom 效果
- 低电平 (0): 暗灰 #3A3A3A + 呼吸动画
- 悬空 (Z): 半透明白 rgba(255,255,255,0.3)

状态指示:
- 已完成: 金色 #FFD700 + 铜箔走线
- 进行中: 荧光青 + 呼吸灯
- 锁定: 灰色 #444444 + 数字迷雾
```

---

### 2. 字体系统 (Typography)

#### 字体选择
```
标题字族: Orbitron / Russo One (机械感)
  - 用途: 所有标题、Logo、关键文案
  - 大小: h1=36px, h2=28px, h3=24px, h4=20px

正文/代码字族: JetBrains Mono / Fira Code (等宽)
  - 用途: 代码、关卡说明、技术信息
  - 大小: body=14px, small=12px, tiny=11px
  - 行高: 1.6 (增强可读性)

终端风格: Courier New (备选)
  - 用途: 系统消息、代码片段
```

#### 文字效果
```
Glitch 故障效果:
@keyframes glitch {
  0%, 100% { clip-path: inset(0); transform: translate(0); }
  20% { clip-path: inset(40% 0 30% 0); transform: translate(-2px, 2px); }
  ...
}
.logo-appear { animation: glitch 0.5s steps(5); }

闪烁效果:
.blink { animation: blink 0.8s step-start infinite; }
@keyframes blink { 50% { opacity: 0; } }

Bloom 辉光:
.glow { 
  text-shadow: 0 0 10px rgba(0,255,194,0.8),
               0 0 20px rgba(0,255,194,0.6);
  filter: brightness(1.2);
}
```

---

### 3. 组件库设计 (Component Library)

#### 按钮组件
```
.btn {
  padding: 8px 16px;
  border-radius: 8px;
  font-weight: 500;
  transition: all 250ms cubic-bezier(0.16, 1, 0.3, 1);
  cursor: pointer;
}

.btn--primary {
  background: #00FFC2;
  color: #050505;
  box-shadow: 0 0 20px rgba(0,255,194,0.3);
}

.btn--primary:hover {
  background: #00FFD4;
  box-shadow: 0 0 30px rgba(0,255,194,0.6);
  transform: translateY(-2px);
}

.btn--outline {
  border: 1px solid #00FFC2;
  background: transparent;
  color: #00FFC2;
}
```

#### 卡片组件
```
.card {
  background: rgba(26, 26, 26, 0.8);
  border: 1px solid rgba(0, 255, 194, 0.2);
  border-radius: 12px;
  backdrop-filter: blur(10px);
  padding: 24px;
  transition: all 300ms ease;
}

.card:hover {
  border-color: rgba(0, 255, 194, 0.6);
  box-shadow: 0 8px 32px rgba(0, 255, 194, 0.1);
  transform: translateY(-4px);
}
```

#### 输入框组件
```
.input {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(0, 255, 194, 0.2);
  border-radius: 8px;
  padding: 10px 12px;
  color: #fff;
  font-family: 'JetBrains Mono';
  font-size: 14px;
}

.input:focus {
  border-color: #00FFC2;
  box-shadow: 0 0 20px rgba(0, 255, 194, 0.3);
  outline: 2px solid #00FFC2;
  outline-offset: 2px;
}
```

---

### 4. 响应式设计 (Responsive Design)

#### 断点定义
```css
/* 移动端 */
@media (max-width: 639px) {
  - 单栏布局
  - 工具箱改为底部工具条
  - 闸刀尺寸: 160px × 240px
  - 字体缩小 10%
}

/* 平板 */
@media (640px to 1023px) {
  - 左栏变为可折叠抽屉
  - 中央 + 右栏并排
  - 闸刀尺寸: 200px × 300px
}

/* 桌面 */
@media (1024px+) {
  - 完整三栏布局
  - 闸刀尺寸: 240px × 360px (标准)
}
```

#### 移动端特殊处理
```
触摸交互:
- 拖拽识别: 50px 以上视为有效拖拽
- 点击判定: 300ms 内没有移动视为点击
- 振动反馈: navigator.vibrate(20ms)

性能优化:
- 禁用 Hover 状态 (改用 Active)
- 减少粒子特效密度 50%
- 启用虚拟滚动 (列表超 50 项)
```

---

### 5. 动画与交互 (Animation & Interaction)

#### 关键动画时长
```
快速反馈: 150ms (按钮、输入框)
标准动画: 300ms (卡片、弹窗)
过渡场景: 500ms (页面切换、镜头)
仪式动画: 1-2s (开场、通关特效)
```

#### 缓动函数
```
cubic-bezier(0.16, 1, 0.3, 1)     标准缓动 (推荐)
cubic-bezier(0.68, -0.55, 0.265, 1.55)  弹性反弹
steps(8)                          分步跳跃 (Glitch)
linear                            线性 (加载条)
```

---

## 用户流程图

### 新用户完整体验路径
```
来访 KNZN.net
  ↓
看到黑屏 + 闸刀开关
  ↓
拖拽闸刀 (通电仪式)
  ↓
进入首页
  ├─ [试玩 Level 1-1 (Guest Mode)]
  │  ↓
  │  完成关卡
  │  ↓
  │  「保存进度需要账户」弹窗
  │  ↓
  └─ [立即注册] ← 转化点 1️⃣
  
进入 /map
  ↓
可视化技能树
  ├─ Sector 01 (免费)
  └─ Sector 02-04 (需订阅)
  ↓
选择 Sector 01 进入
  ↓
进入关卡选择
  ├─ Level 1-1 ✓ (已完成)
  ├─ Level 1-2 ○ (未开始)
  └─ Level 1-5 🔒 (需完成前置)
  ↓
选择 Level 1-2 进入仿真
  ↓
工作台界面
  ├─ 左: 任务目标
  ├─ 中: 电路画布 (可交互)
  └─ 右: AI 助手 + 工具箱
  ↓
[运行仿真] 按钮
  ↓
成功/失败
  ├─ ✓ 成功: 通关特效 + 显示星级
  │   ↓
  │   [下一关] or [回到地图]
  │
  └─ ✗ 失败: AI 提示「试试看...」
      ↓
      用户重试
  ↓
完成 Sector 01
  ↓
3D 芯片旋转 + 解密动画
  ↓
获得蓝图: Cyber_Rover_Chassis.stl
  ↓
进入 /arsenal 查看
  ↓
3D 模型显示 + [下载蓝图] 按钮
  ↓
「想要完整设计图? 升级 Pro」弹窗
  ↓
点击 [升级] ← 转化点 2️⃣
  ↓
支付 $9.9/月
  ↓
解锁 Sector 02-04
  ↓
继续学习 + 获得更多蓝图
  ↓
完成所有关卡
  ↓
下载完整蓝图包
  ↓
「组装你的赛博越野车!」教程
  ↓
上传实物照片到 /community
  ↓
获得「Master Builder」徽章 ← 社交证明
  ↓
分享到社交媒体 → 新用户裂变
```

---

## 移动端适配方案

### 页面调整
```
首页 (/ ):
  桌面: 屏幕中央大闸刀
  移动: 屏幕中央小闸刀 (160×240px)
     底部: 社交证明文案

技能地图 (/map):
  桌面: 全屏 PCB 走线图 + 右侧状态栏
  移动: 全屏地图
       底部 TabBar: 🗺️ 📦 ⚔️ 👤 💎

关卡场景 (/level/:id):
  桌面: 三栏布局 (240px + flex + 280px)
  平板: 左抽屉 + 中央画布 + 右栏折叠
  移动: 单栏垂直
       - 上: 任务面板 (可折叠)
       - 中: 仿真画布 (全屏)
       - 下: 控制按钮 (固定工具条)
       
工具箱 (移动端):
  底部固定工具条 (浮动)
  └─ 可 swipe 切换元件库
```

### 触摸优化
```
元件拖拽:
  - 长按 500ms 进入拖拽模式
  - 拖拽时显示轨迹预览
  - 松手自动吸附
  
线条连接:
  - 点击源引脚 (高亮)
  - 点击目标引脚 (自动连接)
  - 不支持拖拽线条 (改用两次点击)
  
UI 交互:
  - 所有按钮最小 44×44px (Apple 规范)
  - 卡片改为 Tap 反馈 (没有 hover)
  - 菜单改为 Modal (不是 Dropdown)
```

### 性能优化
```
图片优化:
  - 使用 WebP 格式 (降级方案: JPG)
  - 响应式图片 (<640px 用 50% 分辨率)
  
脚本加载:
  - 关卡场景分离加载仿真引擎
  - 社区功能按需加载
  - 图表库延迟加载

网络优化:
  - 启用 Service Worker 缓存
  - 关卡数据本地存储 (IndexedDB)
  - 音频流媒体化 (不全部加载)
```

---

## 关键技术指标 (Key Metrics)

### 性能指标
```
首屏加载 (LCP):          < 1.5s
可交互时间 (TTI):        < 2s
累积布局偏移 (CLS):      < 0.1
仿真帧率:                60fps (桌面) / 30fps (移动)
仿真响应延迟:            < 16ms
```

### 业务指标
```
新用户注册转化率:        > 5% (Guest → Account)
免费到付费转化率:        > 5%
7 日留存率:              > 30%
30 日留存率:             > 15%
月度经常性收入 (MRR):    目标 $10K
用户生命周期价值 (LTV):  > $50
```

---

## 总结

KNZN 网站的核心特色在于：

1. **沉浸式首页** - 闸刀通电仪式建立独特印象
2. **游戏化学习** - RPG 地图 + 关卡系统 + 星级评分
3. **实时仿真** - 浏览器内的电路模拟与可视化
4. **AI 智能助教** - 24/7 个性化学习辅导
5. **实物落地** - 从虚拟设计到真实蓝图的完整闭环
6. **社区赋能** - 用户作品展示与社交裂变

通过这套完整的页面架构、功能设计和视觉指南，KNZN 将成为硬件学习领域的突破性产品。