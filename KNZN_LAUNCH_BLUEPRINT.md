# 🚀 KNZN Protocol v1.0：上线形态完整蓝图

> **核心定义**：一个运行在浏览器中的"硬件工程师养成 RPG"  
> **终极目标**：用户从零开始，通过虚拟关卡设计出真实的"赛博越野车 (Cyber Rover)"，并获得制造蓝图  
> **品牌定位**：硬件版 Duolingo + 赛博朋克美学 + 实物落地闭环

---

## 🎯 产品核心理念

### 世界观设定

- **KNZN** = **K**ernel **N**eural **Z**one **N**etwork (核心神经区域网络)
- 用户不是在"上课"，而是**接入系统**成为 KNZN 组织的实习工程师
- 任务：修复和构建底层的逻辑网络，最终设计出赛博越野车

### 核心价值主张

1. **零门槛上手**：点击开关，灯亮了，瞬间建立电路认知
2. **沉浸式体验**：赛博朋克风格 + 游戏化机制 + 音效反馈
3. **实物落地**：虚拟设计 → 真实蓝图 → 可制造硬件
4. **AI 智能助教**：7x24 小时个性化指导和纠错

---

## 🎨 视觉与交互设计

### 整体美学风格

- **基调**：暗黑模式为主，配合霓虹色彩
- **隐喻**："黑客帝国" × "异星工厂" × "EDA 软件"
- **配色方案**：
  - 背景：深邃黑 `#050505` 或深蓝灰 `#0f172a`
  - 主色调：荧光青 `#00FFC2` (逻辑 1/高电平)
  - 警告色：霓虹红 `#FF0055` (逻辑 0/错误)
  - 辅助色：终端绿 `#33FF00` (代码/日志)

### 字体系统

- **标题**：Orbitron / Russo One (机械感)
- **正文/代码**：JetBrains Mono / Fira Code (等宽)

### 音效设计

- **点击**：清脆机械声
- **通电**：电流嗡鸣声 + 流动光效
- **通关**：合成器和弦 + 粒子爆炸
- **错误**：短促警报声

---

## 🏠 首页设计：接入终端 (The Access Terminal)

### 首屏互动 (The Hook)

```
屏幕中央：断开的闸刀开关 + 熄灭的 KNZN Logo
文案闪烁：> SYSTEM_OFFLINE. CLICK TO INITIALIZE.

用户交互流程：
点击开关 → 机械音效 → 电流动画 → Logo 爆闪点亮 → 进入主界面
```

### 价值展示区域

1. **无需注册体验**：Level 1-1 微缩版，拖线点灯
2. **实物诱惑**：3D 越野车线框图，"通关 Sector 04，获取制造蓝图"
3. **核心卖点**：
   - 🎮 **RPG 模式**："像魔兽世界一样点亮技能"
   - ⚡️ **即时仿真**："浏览器里的虚拟实验室"
   - 🤖 **AI 助教**："7x24小时的私教"

### 转化入口

- 按钮文案：**`[ 建立神经连接 ]`** (Connect Neural Link)
- 社交证明："已有 1024 位工程师加入了构建"

---

## 🎮 核心界面：工程师驾驶舱 (The Cockpit)

### 技能星图 (The Map)

- **视觉**：巨大的 PCB 走线图背景
- **节点分布**：关卡像芯片引脚一样分布
- **状态系统**：
  - 🟢 **已点亮**：高亮 + 三星评分
  - 🟡 **当前解锁**：呼吸灯效果
  - 🔒 **锁定**：灰色 + 战争迷雾

### HUD 状态栏

```
左侧：KNZN_OS v1.0.0 [Online]
右侧：Latency: 24ms | CPU: 12% | [Login_Protocol]

用户状态：
- 等级：Level 5 Wireman (初级布线工)
- XP：进度条显示
- Credits：虚拟金币 (兑换提示)
- 蓝图碎片：0/4 (每通关一个大章节获得一个)
```

### 导航系统 (游戏 HUD 风格)

- 🗺️ **地图 (Map)**：回到技能树主页
- 🎒 **背包 (Inventory)**：已解锁元件卡片 + 成就徽章
- ⚔️ **挑战 (Arena)**：困难模式 (二期占位)
- 👤 **档案 (Profile)**：用户中心
- 💎 **升级 (Upgrade)**：最醒目的付费入口

---

## 🎯 关卡设计：通往实物的四重奏

### Sector 01: 逻辑核心 (The Logic Core)

> **目标**：理解数字世界的 0 和 1  
> **定位**：免费体验区

**关卡列表**：

- **Lvl 1-1: 闭合回路** — 连接电池与电机 (车轮转了)
- **Lvl 1-2: 刹车系统** — 引入开关控制
- **Lvl 1-3: 安全协议 (AND)** — 双手按钮同时按下，冲压机才工作
- **Lvl 1-4: 紧急避险 (OR)** — 任意传感器触发，警报响起
- **Lvl 1-5 [BOSS]: 密码锁** — 组合逻辑，输入 0101 开门

### Sector 02: 动力与控制 (Power & Control)

> **目标**：控制实物车的运动  
> **定位**：付费订阅点

**关卡列表**：

- **Lvl 2-1: 电子开关 (MOSFET)** — 微弱信号控制大电流
- **Lvl 2-2: H桥驱动** — 电机正反转控制 (倒车功能)
- **Lvl 2-3: PWM 脉冲** — 手搓震荡电路，控制 LED 亮度
- **Lvl 2-4 [BOSS]: 差速转向** — 双电机驱动，坦克式转向

### Sector 03: 智能感知 (Intelligence)

> **目标**：让车拥有"眼睛"和"记忆"

**关卡列表**：

- **Lvl 3-1: 光敏电阻** — 天黑自动亮灯 (车灯系统)
- **Lvl 3-2: 记忆单元 (Latch)** — 按键启动，松手不停
- **Lvl 3-3: 计数器** — 记录车轮转数 (里程表)
- **Lvl 3-4 [BOSS]: 循迹逻辑** — 传感器控制转向 (自动驾驶雏形)

### Sector 04: 物质化 (Fabrication)

> **目标**：填平虚拟与现实的鸿沟  
> **定位**：KNZN 的杀手锏功能

**关卡列表**：

- **Lvl 4-1: 选型配对 (BOM Puzzle)** — 从虚拟仓库选择正确封装的元件
- **Lvl 4-2: 图层透视 (Gerber Puzzle)** — 找茬游戏修复 PCB 设计错误
- **Lvl 4-3: 空间装配 (Assembly)** — 3D 俄罗斯方块，PCB 装入外壳

---

## 🎮 关卡界面设计 (The Gameplay Loop)

### 三栏式布局

#### 左侧：任务与剧情 (Mission Control)

```
NPC 对话系统 (机器人 "Bit")：
"指挥官，飞船的门禁系统坏了，我们需要构建一个逻辑电路，
只有当两个传感器都激活时，门才能打开。"

目标列表：
☐ 放置一个 AND 门
☐ 连接传感器 A 和 B 到输入端
☐ 输出端连接到门锁电机
```

#### 中间：仿真画布 (The Workbench)

- **交互**：极致丝滑的拖拽体验
- **视觉**：网格背景 + 元件吸附对齐
- **连线**：自动寻路 (Orthogonal routing)
- **运行反馈**：
  - 低电平 (0)：深灰色/暗红色线条
  - 高电平 (1)：发光青色 + 流动粒子特效
  - 成功特效：屏幕震动 + "SUCCESS" 金色字样

#### 右侧：AI 助手与工具箱 (Tools & Help)

- **元件箱**：仅显示当前关卡允许的元件
- **AI 悬浮球**：
  - 预设提示："我卡住了，给我一点提示"
  - 智能纠错：3 次失败后主动提示
  - 原理解释："解释这个元件的工作原理"

---

## 👤 用户中心：角色面板 (Character Sheet)

### 设计理念

不做枯燥的表单，要做成 **RPG 角色面板**

### 核心元素

- **Avatar**：生成的像素风头像
- **战力雷达图**：五维展示
  - 逻辑能力
  - 布线美学
  - 调试速度
  - 知识广度
  - 连胜纪录
- **XP 条与等级**："Level 5 - 初级布线工"
- **学习热力图**：类似 GitHub Contributions 的活跃度展示
- **设置选项**：音效开关、语言切换、订阅管理

---

## 🏆 终局：蓝图交付系统 (The Blueprint Drop)

### 战利品库 (The Arsenal)

#### 3D 预览诱饵

- **展示**：全息投影的 3D 赛博越野车模型
- **交互**：旋转、缩放查看细节
- **状态变化**：每通关一个章节，对应部分实体化并高亮
- **心理暗示**："只要我打通关，这辆车的设计图就是我的了"

#### 一键导出核心交付物

当用户通关 Level 4-3，解锁 **[DOWNLOAD BLUEPRINTS]** 按钮：

**下载包内容**：

1. **🏭 Gerber Files**：直接上传嘉立创打板的标准文件
2. **📋 Smart BOM**：带一键购买链接的 Excel 物料清单
3. **🧊 STL Files**：车身 3D 打印文件
4. **📖 Assembly Guide**：详细的 PDF 组装说明书

### 引导系统：虚拟到现实的桥梁

#### 外部平台对接教程

- **PCB 下单教程**：2 分钟视频演示嘉立创下单流程
- **元件采购指南**：淘宝/立创商城购买教程
- **免焊接方案**：推荐 SMT 贴片服务或面包板套件

#### 商业化埋点

- **PCB 推荐**：Affiliate Link 获得 5-10% 佣金
- **元件推荐**：淘宝店合作返点

---

## 🌐 社区生态：现实世界反馈

### 装配车间板块 (Assembly Hall)

- **功能**：用户上传实物作品照片/视频
- **奖励**：核实后获得金色边框或 "Master Builder" 徽章
- **作用**：最强的社交证明，新用户看到真实作品直接拉满付费意愿

### 用户完整体验闭环

1. **入坑**：KNZN.net 游戏体验 + 学习真本事
2. **挑战**：为解锁赛博遥控车图纸，充值学习高级关卡
3. **通关**：获得 **[绝密制造档案.zip]**
4. **出海**：拿蓝图去嘉立创打板 + 淘宝买元件
5. **降临**：按装配手册组装，车动了！
6. **回归**：社区晒图 + 朋友圈裂变新用户

---

## 💻 技术实现架构

### 前端技术栈

- **框架**：Vue 3 + Nuxt 4 (严格遵循 app/ 目录结构)
- **状态管理**：Pinia (跨组件共享) + Composables (局部状态)
- **UI 框架**：
  - UnoCSS：布局和基础样式
  - Element Plus：复杂交互组件
- **游戏引擎**：
  - 2D 关卡：Phaser 3
  - 高性能渲染：PixiJS
  - 3D 展示：Three.js
- **特效库**：
  - SplitType + GSAP：文字解密效果
  - TsParticles：背景粒子动画
  - Howler.js：音效系统

### 后端技术栈

- **框架**：NestJS (Fastify 适配器)
- **数据库**：PostgreSQL (主库) + Redis (缓存)
- **AI 集成**：
  - LangChain：工作流编排
  - OpenAI GPT-4 / Anthropic Claude
  - RAG 检索增强生成
- **向量数据库**：Qdrant (优先) / Pinecone
- **任务队列**：BullMQ (异步任务)

### 类型共享机制

- **核心原则**：前后端通过 `packages/types` 共享类型定义
- **实践**：Zod Schema 作为单一事实来源
- **流程**：Schema 定义 → TypeScript 类型推导 → 运行时验证
- **API 客户端**：基于 OpenAPI 自动生成强类型 SDK

---

## 📊 商业模式与变现

### 定价策略

- **免费版 (Lite Card)**：Basic Access / Read-Only
  - Sector 01 完全免费
  - Sector 02 前 2 关免费
- **订阅版 (Pro Card)**：$9.9/月 Full Write Access / AI Core Enabled
  - 解锁所有关卡
  - AI 助教无限次数
  - 蓝图下载权限
  - 优先客服支持

### 收入来源

1. **订阅收入**：主要收入来源
2. **Affiliate 佣金**：PCB 打板 + 元件采购推广
3. **硬件套件**：与供应商合作分成
4. **企业培训**：B2B 定制化培训服务

---

## 🚀 开发里程碑

### MVP v1.0 (4-6 周)

**目标**：验证核心价值，获得首批付费用户

**核心功能**：

- [ ] Sector 01 完整关卡 (5 个关卡)
- [ ] 基础电路仿真引擎
- [ ] 用户认证和进度系统
- [ ] AI 问答基础功能 (OpenAI 集成)
- [ ] 赛博朋克风格 UI
- [ ] 支付系统集成 (Lemon Squeezy)

**技术债务**：

- 仿真引擎使用简化算法
- AI 功能基础版本
- 暂无实物蓝图生成

### v1.5 增强版 (2-3 个月)

**目标**：完善游戏化体验，提升用户留存

**新增功能**：

- [ ] Sector 02-03 完整关卡
- [ ] 完整技能树可视化
- [ ] 成就系统和排行榜
- [ ] 社区功能 (用户作品展示)
- [ ] 移动端 PWA 优化
- [ ] AI 功能增强 (RAG 系统)

### v2.0 实物落地 (6 个月+)

**目标**：实现虚拟到现实的完整闭环

**核心功能**：

- [ ] Sector 04 制造关卡
- [ ] 蓝图生成系统 (Gerber + BOM + STL)
- [ ] 供应链对接 (嘉立创 API)
- [ ] 3D 预览和装配检查
- [ ] 用户作品社区
- [ ] 企业版功能

---

## 📈 关键成功指标 (KPIs)

### 用户增长指标

- **新用户注册**：月增长 > 50%
- **7 天留存率**：> 30%
- **30 天留存率**：> 15%

### 付费转化指标

- **免费到付费转化率**：> 5%
- **月度经常性收入 (MRR)**：目标 $10K
- **用户生命周期价值 (LTV)**：> $50

### 学习效果指标

- **关卡完成率**：> 60%
- **AI 问答满意度**：> 4.5/5
- **用户学习时长**：平均 > 30 分钟/会话

### 社区活跃指标

- **实物作品上传率**：付费用户 > 20%
- **社区互动率**：月活跃用户 > 40%
- **用户推荐率 (NPS)**：> 50

---

## 🎯 竞争优势与护城河

### 核心差异化

1. **游戏化程度**：市面上最沉浸的硬件学习体验
2. **实物落地**：从虚拟到现实的完整闭环
3. **AI 智能化**：个性化学习路径和实时答疑
4. **美学设计**：赛博朋克风格在教育领域的首次应用

### 技术护城河

1. **仿真引擎**：浏览器端高性能电路仿真
2. **关卡设计**：深度游戏化的教学内容
3. **AI 集成**：基于 RAG 的专业硬件知识库
4. **制造对接**：标准化的蓝图生成和供应链整合

### 运营护城河

1. **内容质量**：精心设计的渐进式学习路径
2. **社区效应**：用户作品展示形成的社交证明
3. **品牌认知**：KNZN 在硬件学习领域的独特定位
4. **数据积累**：用户学习行为数据优化产品体验

---

## 🔮 未来扩展规划

### 内容扩展 (DLC 模式)

- **Expansion 1: 模拟世界** - 电容、电感、运放、滤波器
- **Expansion 2: 代码电路** - Verilog/FPGA 硬件描述语言
- **Expansion 3: 嵌入式大师** - C 语言驱动真实 MCU

### 平台扩展

- **移动原生应用**：iOS/Android 深度优化
- **桌面客户端**：Electron 版本，支持离线使用
- **VR/AR 体验**：沉浸式 3D 电路搭建

### 商业扩展

- **企业培训版**：面向公司的团队培训解决方案
- **教育机构版**：面向学校的课程管理系统
- **硬件生态**：自有品牌的学习套件和开发板

---

## 💡 总结：KNZN 的独特价值

KNZN 不是一个传统的在线教育平台，而是一个**硬件工程师的虚拟训练营**。它通过以下方式重新定义了硬件学习：

1. **零门槛**：点击开关灯亮的瞬间，建立电路认知
2. **高沉浸**：赛博朋克美学 + 游戏化机制 + 音效反馈
3. **强动机**：真实蓝图的终极奖励驱动持续学习
4. **深价值**：从兴趣科普到实战工程培训的价值跃升

当用户完成 KNZN 的学习旅程时，他们获得的不仅是知识，更是一套**真的能造出来的硬件设计图纸**。这种从虚拟到现实的跨越，正是 KNZN 的核心魅力所在。

**KNZN 的使命**：让每个人都能成为硬件创造者，让复杂的电路设计变得像玩游戏一样简单有趣。

---

## 📋 附录：详细关卡设计示例

### Level 1-1: 闭合回路 (Hello World)

**学习目标**：理解电路的基本概念 - 闭合回路

**场景设定**：

```
NPC Bit: "欢迎来到 KNZN 训练营！这是你的第一个任务。
看到那个熄灭的 LED 了吗？你需要让它亮起来。"

任务目标：
☐ 将电池正极连接到 LED 正极
☐ 将 LED 负极连接到电池负极
☐ 观察 LED 点亮效果
```

**交互设计**：

- 画布中央：一个电池、一个 LED、若干连线
- 用户拖拽连线连接元件
- 连接正确时：LED 发光，播放"叮"声，XP +10

**知识点讲解**：

- 电流需要形成闭合回路才能流动
- LED 有正负极之分
- 电池提供电压驱动电流

### Level 1-5: 密码锁 (BOSS 关卡)

**学习目标**：综合运用 AND、OR、NOT 门设计组合逻辑

**场景设定**：

```
NPC Bit: "这是 Sector 01 的最终挑战！KNZN 总部的保险库需要
一个四位密码锁。只有输入正确的密码 '0101' 时，保险库才会打开。"

任务目标：
☐ 设计逻辑电路识别密码 '0101'
☐ 使用提供的逻辑门 (AND, OR, NOT)
☐ 输入正确密码时，绿灯亮起并播放开锁音效
```

**交互设计**：

- 左侧：4 个开关 (代表 4 位密码输入)
- 中央：逻辑门工具箱 (AND, OR, NOT)
- 右侧：输出指示灯
- 用户需要设计电路，使得只有 0101 输入时输出为 1

**成功反馈**：

- 屏幕震动效果
- 金色粒子爆炸
- "SECTOR 01 COMPLETE!" 大字显示
- 解锁 Sector 02 预览

---

## 🎵 音效与动画规范

### 音效库设计

```javascript
// 基础交互音效
const SOUND_EFFECTS = {
  click: 'mechanical_click.wav', // 机械键盘声
  hover: 'electrical_hum.wav', // 轻微电流声
  connect: 'wire_snap.wav', // 连线吸附声
  success: 'power_up.wav', // 通电成功
  error: 'short_circuit.wav', // 短路警报
  levelComplete: 'achievement.wav', // 关卡完成
  backgroundAmbient: 'cyber_ambient.wav', // 背景氛围音
}
```

### 动画效果规范

```css
/* 电流流动动画 */
.wire-active {
  background: linear-gradient(90deg, transparent 0%, #00ffc2 50%, transparent 100%);
  animation: current-flow 1s infinite;
}

/* 成功特效 */
.success-effect {
  animation:
    screen-shake 0.3s ease-in-out,
    glow-pulse 1s ease-out;
}

/* 呼吸灯效果 */
.level-available {
  box-shadow: 0 0 20px #00ffc2;
  animation: breathing 2s ease-in-out infinite;
}
```

---

## 🔧 技术实现细节

### 电路仿真引擎架构

```typescript
// 核心仿真类
class CircuitSimulator {
  private nodes: Map<string, Node> = new Map()
  private components: Component[] = []

  // 添加元件
  addComponent(component: Component): void {
    this.components.push(component)
    this.updateConnections()
  }

  // 运行仿真
  simulate(): SimulationResult {
    // 使用修正节点法求解电路
    const equations = this.buildEquations()
    const solution = this.solveLinearSystem(equations)
    return this.updateComponentStates(solution)
  }

  // 实时更新 (60fps)
  startRealTimeSimulation(): void {
    const update = () => {
      const result = this.simulate()
      this.renderResults(result)
      requestAnimationFrame(update)
    }
    update()
  }
}
```

### AI 助教集成

```typescript
// AI 助教服务
class AITutor {
  private openai: OpenAI
  private knowledgeBase: VectorStore

  async getHint(level: Level, userCircuit: Circuit, attempts: number): Promise<string> {
    const context = await this.knowledgeBase.search(level.topic)
    const prompt = this.buildHintPrompt(level, userCircuit, attempts, context)

    const response = await this.openai.chat.completions.create({
      model: 'gpt-4',
      messages: [{ role: 'user', content: prompt }],
      temperature: 0.7,
    })

    return response.choices[0].message.content
  }

  private buildHintPrompt(
    level: Level,
    circuit: Circuit,
    attempts: number,
    context: string
  ): string {
    return `
你是 KNZN 系统的 AI 助教。用户正在学习 ${level.title}。

当前关卡目标：${level.objective}
用户电路状态：${this.analyzeCircuit(circuit)}
尝试次数：${attempts}
相关知识：${context}

请提供一个简短、友好的提示，帮助用户理解问题所在。
使用赛博朋克风格的语言，保持神秘感。
`
  }
}
```

这份完整的 KNZN 上线蓝图涵盖了从产品理念到技术实现的所有关键要素。它不仅是一个产品文档，更是一个可执行的行动指南，为独立开发者提供了清晰的开发路径和成功标准。

通过这个蓝图，KNZN 将成为硬件学习领域的革命性产品，重新定义了技术教育的边界。
